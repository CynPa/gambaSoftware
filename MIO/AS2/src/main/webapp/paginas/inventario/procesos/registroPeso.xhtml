<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:as2="http://java.sun.com/jsf/composite/componentes">

<f:metadata>
	<f:viewParam name="idRegistroPeso" value="#{registroPesoBean.idRegistroPeso}" />
</f:metadata>
<ui:composition template="/template/template.xhtml">

	<ui:define name="contenido">

		<h:form prependId="false" id="form">

			<p:outputPanel id="panelContenedor">

				<as2:toolBar bean="#{registroPesoBean}">
					<as2:buttonEliminar bean="#{registroPesoBean}">
						<h:outputText value="#{msgs.lbl_documento}:" />
						<h:outputText value="#{registroPesoBean.registroPeso.documento.nombre}" />
						<h:outputText value="#{msgs.lbl_numero}:" />
						<h:outputText value="#{registroPesoBean.registroPeso.numero}" />
					</as2:buttonEliminar>

					<as2:buttonImprimir id="btnImprimir" beanReporte="#{reporteRegistroPesoBean}" bean="#{registroPesoBean}"
						target="#{reporteRegistroPesoBean.registroPeso}" value="#{registroPesoBean.registroPeso}" />

					<as2:buttonExportaExcel bean="#{registroPesoBean}" tabla=":form:tablaRegistroPeso" />
				</as2:toolBar>

				<p:outputPanel id="panelDialogoAjusteInventario">
					<p:dialog header="#{msgs.lbl_ajuste_inventario}" widgetVar="dialogAjusteInventario" modal="true" height="160" width="500" showEffect="slide"
						hideEffect="slide" closable="false">
						<p:outputPanel id="panelMotivoAjusteInventario">
							<h:panelGrid columns="2" columnClasses="columnaEtiqueta, columnaValor" cellspacing="0" cellpadding="0">

								<p:outputLabel for="cboDocumentoIng" rendered="#{registroPesoBean.ajusteInventarioIngreso != null}"
									value="#{msgs.lbl_documento} #{msgs.lbl_ingreso}:" />
								<p:selectOneMenu styleClass="input-text" value="#{registroPesoBean.ajusteInventarioIngreso.documento}" id="cboDocumentoIng"
									required="#{registroPesoBean.mostradoDialogoAjusteInventario}" rendered="#{registroPesoBean.ajusteInventarioIngreso != null}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaDocumentosAjusteIngreso}" var="_documento" itemLabel="#{_documento.nombre}"
										itemValue="#{_documento}" />
									<p:ajax process="@this" global="false" />
								</p:selectOneMenu>

								<p:outputLabel rendered="#{registroPesoBean.ajusteInventarioIngreso != null}" for="acMotivoAjusteInventarioIng"
									value="#{msgs.lbl_motivo} #{msgs.lbl_ajuste} #{msgs.lbl_inventario} #{msgs.lbl_ingreso}:" />
								<p:autoComplete queryDelay="#{sesionControler.retrasoFiltro}" id="acMotivoAjusteInventarioIng" styleClass="input-text"
									value="#{registroPesoBean.ajusteInventarioIngreso.motivoAjusteInventario}"
									completeMethod="#{registroPesoBean.autocompletarMotivoAjusteInventario}" var="_motivoAjusteInventario"
									itemLabel="#{_motivoAjusteInventario.nombre}" itemValue="#{_motivoAjusteInventario}" forceSelection="true" dropdown="true" minQueryLength="1"
									required="#{registroPesoBean.mostradoDialogoAjusteInventario}" rendered="#{registroPesoBean.ajusteInventarioIngreso != null}">

									<p:column headerText="#{msgs.lbl_codigo}">#{_motivoAjusteInventario.codigo}</p:column>
									<p:column headerText="#{msgs.lbl_nombre}">#{_motivoAjusteInventario.nombre}</p:column>

									<p:ajax process="@this" global="false" />
								</p:autoComplete>

								<p:outputLabel for="cboDocumentoEgr" rendered="#{registroPesoBean.ajusteInventarioEgreso != null}"
									value="#{msgs.lbl_documento} #{msgs.lbl_egreso}:" />
								<p:selectOneMenu styleClass="input-text" value="#{registroPesoBean.ajusteInventarioEgreso.documento}" id="cboDocumentoEgr"
									required="#{registroPesoBean.mostradoDialogoAjusteInventario}" rendered="#{registroPesoBean.ajusteInventarioEgreso != null}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaDocumentosAjusteEgreso}" var="_documento" itemLabel="#{_documento.nombre}"
										itemValue="#{_documento}" />
									<p:ajax process="@this" global="false" />
								</p:selectOneMenu>

								<p:outputLabel rendered="#{registroPesoBean.ajusteInventarioEgreso != null}" for="acMotivoAjusteInventarioEgr"
									value="#{msgs.lbl_motivo} #{msgs.lbl_ajuste} #{msgs.lbl_inventario} #{msgs.lbl_egreso}:" />
								<p:autoComplete queryDelay="#{sesionControler.retrasoFiltro}" id="acMotivoAjusteInventarioEgr" styleClass="input-text"
									value="#{registroPesoBean.ajusteInventarioEgreso.motivoAjusteInventario}"
									completeMethod="#{registroPesoBean.autocompletarMotivoAjusteInventario}" var="_motivoAjusteInventario"
									itemLabel="#{_motivoAjusteInventario.nombre}" itemValue="#{_motivoAjusteInventario}" forceSelection="true" dropdown="true" minQueryLength="1"
									required="#{registroPesoBean.mostradoDialogoAjusteInventario}" rendered="#{registroPesoBean.ajusteInventarioEgreso != null}">

									<p:column headerText="#{msgs.lbl_codigo}">#{_motivoAjusteInventario.codigo}</p:column>
									<p:column headerText="#{msgs.lbl_nombre}">#{_motivoAjusteInventario.nombre}</p:column>

									<p:ajax process="@this" global="false" />
								</p:autoComplete>

							</h:panelGrid>
						</p:outputPanel>
						<f:facet name="footer">
							<center>
								<p:commandButton value="#{msgs.lbl_generar_ajsute_inventario}" action="#{registroPesoBean.generarAjusteInventario}"
									process="@this :form:acMotivoAjusteInventarioEgr :form:cboDocumentoEgr :form:acMotivoAjusteInventarioIng :form:cboDocumentoIng"
									update=":form:panelContenedor" />
								<p:commandButton value="#{msgs.btn_cancelar}" process="@this" action="#{registroPesoBean.cerrarDialogoAjusteInventario}"
									oncomplete="dialogAjusteInventario.hide()" />
							</center>
						</f:facet>
					</p:dialog>
				</p:outputPanel>

				<!-- PanelEdicionFormaCobro -->
				<h:panelGroup id="panelEdicionParcial">
					<p:dialog header="#{msgs.lbl_editar}" widgetVar="dialogEdicionParcial" modal="true" height="245" width="900" showEffect="slide"
						hideEffect="slide" rendered="#{registroPesoBean.indicadorEditarParcial}">
						<p:panel id="panelParcial">
							<h:panelGrid columns="4" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor">

								<p:outputLabel for="autoEmpresaParcial"
									value="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA' ? msgs.lbl_proveedor : msgs.lbl_cliente }:"
									rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA'}" />
								<p:autoComplete rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA'}"
									queryDelay="#{sesionControler.retrasoFiltro}" styleClass="input-text" value="#{registroPesoBean.registroPeso.empresa}"
									completeMethod="#{registroPesoBean.autocompletarEmpresa}" var="_empresa" itemLabel="#{_empresa.nombreFiscal}" itemValue="#{_empresa}"
									forceSelection="true" dropdown="true" minQueryLength="2" id="autoEmpresaParcial" required="#{registroPesoBean.indicadorEditarParcial}">
									<p:column headerText="#{msgs.lbl_empresa_identificacion}">#{_empresa.identificacion}</p:column>
									<p:column headerText="#{msgs.lbl_empresa_nombre_fiscal}">#{_empresa.nombreFiscal}</p:column>
									<p:column headerText="#{msgs.lbl_empresa_nombre_comercial}">#{_empresa.nombreComercial}</p:column>
									<p:ajax listener="#{registroPesoBean.actualizarEmpresaListener}" process="@this" event="itemSelect" global="false"
										update=":form:panelParcial" />
								</p:autoComplete>

								<p:outputLabel for="cboTransportistaParcial" value="#{msgs.lbl_titulo_transportista}:" />
								<p:selectOneMenu styleClass="input-text" value="#{registroPesoBean.registroPeso.transportista}" id="cboTransportistaParcial" required="true"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaTransportistaCombo}" var="_trasnportista" itemLabel="#{_trasnportista.nombre}"
										itemValue="#{_trasnportista}" />
									<p:ajax process="@this" global="false" listener="#{registroPesoBean.actualizarTransportista(true)}"
										update="cboChoferParcial cboVehiculoParcial cboRutaParcial"></p:ajax>
									<f:validateBean />
								</p:selectOneMenu>

								<p:commandLink onclick="dglCrearVehiculo.show();" update="panelDatosBasicosVehiculo" process="@this"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'}">
									<p:outputLabel for="cboVehiculo" value="#{msgs.lbl_titulo_vehiculo}:" />
									<f:setPropertyActionListener target="#{registroPesoBean.renderVehiculoNuevo}" value="true" />
								</p:commandLink>
								<p:selectOneMenu styleClass="input-text" id="cboVehiculoParcial" value="#{registroPesoBean.registroPeso.vehiculo}" required="true"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaVehiculoCombo}" var="_vehiculo" itemLabel="#{_vehiculo.nombreCompletoVehiculo}"
										itemValue="#{_vehiculo}" />
									<p:ajax process="@this" global="false" update="cboRutaParcial" listener="#{registroPesoBean.actualizarVehiculo(true)}" />
									<f:validateBean />
								</p:selectOneMenu>

								<p:outputLabel for="cboRutaParcial" value="#{msgs.lbl_ruta}:" />
								<p:selectOneMenu styleClass="input-text" id="cboRutaParcial" required="true" value="#{registroPesoBean.registroPeso.ruta}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaRuta}" var="_ruta" itemLabel="#{_ruta.ruta}" itemValue="#{_ruta}" />
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:selectOneMenu>

								<p:commandLink onclick="dglCrearChofer.show();" update="panelDatosBasicosChofer" process="@this"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'}">
									<p:outputLabel for="cboChoferParcial" value="#{msgs.lbl_chofer}:" />
									<f:setPropertyActionListener target="#{registroPesoBean.renderChoferNuevo}" value="true" />
								</p:commandLink>
								<p:selectOneMenu styleClass="input-text" value="#{registroPesoBean.registroPeso.chofer}" id="cboChoferParcial" required="true"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaChoferCombo}" var="_chofer" itemLabel="#{_chofer.nombre}" itemValue="#{_chofer}" />
									<p:ajax process="@this" global="false"></p:ajax>
									<f:validateBean />
								</p:selectOneMenu>

								<p:outputLabel value="#{msgs.lbl_direccion}:" />
								<h:outputText value="#{registroPesoBean.registroPeso.direccion}" />

								<p:outputLabel for="cboPedidoParcial" value="#{msgs.lbl_orden_compra}:" />
								<p:selectOneMenu value="#{registroPesoBean.pedidoProveedor}" id="cboPedidoParcial" required="#{registroPesoBean.indicadorEditarParcial}">
									<f:selectItem itemValue="" itemLabel="#{msgs.lbl_seleccione}" />
									<f:selectItems value="#{registroPesoBean.listaPedidoProveedor}" var="_pedidoProveedor" itemLabel="#{_pedidoProveedor.numero}"
										itemValue="#{_pedidoProveedor}" />
									<p:ajax process="@this" update=":form:panelParcial" listener="#{registroPesoBean.cargarDetallePedidoListener(true)}" global="false" />
								</p:selectOneMenu>

								<p:outputLabel for="txtDescripcionParcial" value="#{msgs.lbl_descripcion}:" />
								<p:inputTextarea styleClass="input-text" value="#{registroPesoBean.registroPeso.descripcion}" id="txtDescripcionParcial">
									<p:ajax process="@this" partialSubmit="true" global="false" />
									<f:validateBean />
								</p:inputTextarea>
							</h:panelGrid>

							<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{registroPesoBean.listaDetallePedidoProveedor}" id="tablaDetalleParcial"
								rowIndexVar="secuencialParcial" emptyMessage="#{msgs.msg_no_hay_datos}" var="_detallePedidoProveedor" paginator="false" style="width:100%"
								rowKey="#{_detallePedidoProveedor.rowKey}" selectionMode="single" selection="#{registroPesoBean.registroPeso.detallePedidoProveedor}">
								<p:ajax event="rowSelect" process=":form:panelParcial" update=":form:panelParcial" global="false" partialSubmit="true"
									listener="#{registroPesoBean.actualizarDetallePedidoProveedor}" oncomplete="nextFocus('btnGuardarParcial')" />
								<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
									<h:outputText value="#{secuencialParcial+1}" />
								</p:column>
								<p:column styleClass="columnaDTCodigoProducto tableCell" headerText="#{msgs.lbl_codigo_producto}">
									<h:outputText value="#{_detallePedidoProveedor.producto.codigo}" />
								</p:column>
								<p:column styleClass="tableCell" headerText="#{msgs.lbl_nombre_producto}">
									<h:outputText value="#{_detallePedidoProveedor.producto.nombre}" />
								</p:column>
								<p:column styleClass="columnaDTNombreCorto tableCell" headerText="#{msgs.lbl_unidad}">
									<h:outputText value="#{_detallePedidoProveedor.unidadCompra.nombre}" />
								</p:column>
								<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha} #{msgs.lbl_pedido}">
									<h:outputText value="#{_detallePedidoProveedor.pedidoProveedor.fecha}">
										<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
									</h:outputText>
								</p:column>
								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_cantidad} #{msgs.lbl_pedido}">
									<h:outputText value="#{_detallePedidoProveedor.cantidad}">
									</h:outputText>
								</p:column>
								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_saldo} x #{msgs.lbl_recibir}">
									<h:outputText value="#{_detallePedidoProveedor.cantidadPorRecibir}">
									</h:outputText>
								</p:column>
							</p:dataTable>

						</p:panel>

						<f:facet name="footer">
							<center>
								<p:commandButton id="btnGuardarParcial" action="#{registroPesoBean.guardarParcial}" value="#{msgs.btn_guardar}"
									oncomplete="validacionesModal(xhr, status, args, dialogEdicionParcial)" process="@this panelParcial" update=":form:panelListado panelParcial">
								</p:commandButton>
								<p:commandButton id="btnCancelarParcial" value="#{msgs.btn_cancelar}" oncomplete="dialogEdicionParcial.hide();" process="@this">
									<f:setPropertyActionListener target="#{registroPesoBean.indicadorEditarParcial}" value="false"></f:setPropertyActionListener>
								</p:commandButton>
							</center>
						</f:facet>
					</p:dialog>
				</h:panelGroup>

				<p:outputPanel id="panelNuevo">

					<p:confirmDialog id="dialog" header="#{msgs.lbl_registroPeso_panel}" widgetVar="dialogConfirmar" height="25" width="300" appendTo="@(body)"
						closable="false">
						<h:outputText value="#{registroPesoBean.mensajeConfirmacion}" style="font-weight: bold;" />
						<p:separator />
						<p:commandButton value="#{msgs.btn_aplicar_destare}" action="#{registroPesoBean.actualizarValores}" process="@this"
							update="@this :form:panelNuevo :form:panelListado" partialSubmit="true" onclick="PF('dialogConfirmar').hide();">
						</p:commandButton>
						<p:commandButton process="@this" value="#{msgs.btn_cancelar}" partialSubmit="true" onclick="PF('dialogConfirmar').hide();" />
					</p:confirmDialog>

					<ui:include src="/template/transportistaAgil.xhtml">
						<ui:param name="bean" value="#{registroPesoBean}" />
						<ui:param name="objetoActualizar" value=":form:cboTransportista :form:cboVehiculo :form:cboChofer :form:cboRuta" />
					</ui:include>

					<ui:include src="/template/vehiculoAgil.xhtml">
						<ui:param name="bean" value="#{registroPesoBean}" />
						<ui:param name="objetoActualizar" value=":form:cboTransportista :form:cboVehiculo :form:cboChofer :form:cboRuta" />
					</ui:include>

					<ui:include src="/template/choferAgil.xhtml">
						<ui:param name="bean" value="#{registroPesoBean}" />
						<ui:param name="objetoActualizar" value=":form:cboTransportista :form:cboVehiculo :form:cboChofer" />
					</ui:include>

					<p:panel rendered="#{registroPesoBean.editado}" header="#{msgs.lbl_panel_edicion} #{msgs.lbl_registroPeso_panel}">
						<p:panel id="panelCabecera" toggleable="true" collapsed="#{registroPesoBean.registroPeso.id != 0}"
							header="#{registroPesoBean.registroPeso.tipoRegistroPeso.nombre}: #{registroPesoBean.registroPeso.numero} - #{msgs.lbl_estado}(#{registroPesoBean.registroPeso.id == 0 ? 'NUEVO' : registroPesoBean.registroPeso.estado.nombre})">
							<h:panelGrid columns="#{registroPesoBean.numeroColumnasPanelNuevo}" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor">

								<p:outputLabel for="cboDocumento" value="#{msgs.lbl_documento}:" />
								<p:selectOneMenu styleClass="input-text" id="cboDocumento" required="true" value="#{registroPesoBean.registroPeso.documento}"
									disabled="#{registroPesoBean.registroPeso.id != 0}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaDocumento}" var="_documento" itemLabel="#{_documento.nombre}" itemValue="#{_documento}" />
									<p:ajax process="@this" update="txtNumero" global="false" />
									<f:validateBean />
								</p:selectOneMenu>

								<p:outputLabel for="txtNumero" value="#{msgs.lbl_numero}:" />
								<p:inputMask styleClass="input-text" id="txtNumero" value="#{registroPesoBean.registroPeso.numero}"
									mask="#{registroPesoBean.registroPeso.documento.secuencia.patron}" disabled="#{registroPesoBean.registroPeso.id != 0}">
									<f:validateBean />
								</p:inputMask>

								<p:outputLabel for="cboTipo" value="#{msgs.lbl_tipo}:" />
								<p:selectOneMenu styleClass="input-text" id="cboTipo" required="true" value="#{registroPesoBean.registroPeso.tipoRegistroPeso}"
									disabled="#{registroPesoBean.registroPeso.id != 0}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaTipoRegistroPeso}" var="_tipo" itemLabel="#{_tipo.nombre}" itemValue="#{_tipo}" />
									<p:ajax process="@this" update=":form:panelNuevo" global="false" listener="#{registroPesoBean.actualizarTipo}" />
									<f:validateBean />
								</p:selectOneMenu>

								<p:outputLabel for="calFecha" value="#{msgs.lbl_fecha}:" />
								<p:calendar pattern="#{registroPesoBean.formatoFecha}" showOn="button" navigator="true" value="#{registroPesoBean.registroPeso.fecha}"
									id="calFecha" required="true" disabled="true">
									<p:ajax process="@this" global="false" partialSubmit="true" event="dateSelect" />
									<p:ajax process="@this" global="false" partialSubmit="true" event="change" />
									<f:validateBean />
								</p:calendar>

								<p:commandLink oncomplete="dglTransportistaAgil.show();" update="panelTransportistaAgil" process="@this"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE' or registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}"
									actionListener="#{registroPesoBean.crearTransportista()}">
									<p:outputLabel for="cboTransportista" value="#{msgs.lbl_titulo_transportista}:" />
								</p:commandLink>
								<p:selectOneMenu styleClass="input-text" value="#{registroPesoBean.registroPeso.transportista}" id="cboTransportista" required="true"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'  or registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaTransportistaCombo}" var="_trasnportista" itemLabel="#{_trasnportista.nombre}"
										itemValue="#{_trasnportista}" />
									<p:ajax process="@this" global="false" listener="#{registroPesoBean.actualizarTransportista(true)}" update="cboChofer cboVehiculo cboRuta"></p:ajax>
									<f:validateBean />
								</p:selectOneMenu>

								<p:commandLink oncomplete="dglVehiculoAgil.show();" update="panelDatosBasicosVehiculo" process="@this"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE' or registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}"
									actionListener="#{registroPesoBean.crearVehiculo()}">
									<p:outputLabel for="cboVehiculo" value="#{msgs.lbl_titulo_vehiculo}:" />
								</p:commandLink>
								<p:selectOneMenu styleClass="input-text" id="cboVehiculo" value="#{registroPesoBean.registroPeso.vehiculo}" required="true"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE' or registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaVehiculoCombo}" var="_vehiculo" itemLabel="#{_vehiculo.nombreCompletoVehiculo}"
										itemValue="#{_vehiculo}" />
									<p:ajax process="@this" global="false" update="cboRuta" listener="#{registroPesoBean.actualizarVehiculo}" />
									<f:validateBean />
								</p:selectOneMenu>

								<p:outputLabel for="cboRuta" value="#{msgs.lbl_ruta}:" />
								<p:selectOneMenu styleClass="input-text" id="cboRuta" required="true" value="#{registroPesoBean.registroPeso.ruta}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaRuta}" var="_ruta" itemLabel="#{_ruta.ruta}" itemValue="#{_ruta}" />
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:selectOneMenu>

								<p:commandLink oncomplete="dglChoferAgil.show();" update="panelDatosBasicosChofer" process="@this"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE' or registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}"
									actionListener="#{registroPesoBean.crearChofer()}">
									<p:outputLabel for="cboChofer" value="#{msgs.lbl_chofer}:" />
								</p:commandLink>
								<p:selectOneMenu styleClass="input-text" value="#{registroPesoBean.registroPeso.chofer}" id="cboChofer" required="true"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE' or registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaChoferCombo}" var="_chofer" itemLabel="#{_chofer.nombre}" itemValue="#{_chofer}" />
									<p:ajax process="@this" global="false"></p:ajax>
									<f:validateBean />
								</p:selectOneMenu>

								<p:outputLabel for="autoEmpresa"
									value="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA' ? msgs.lbl_proveedor : msgs.lbl_cliente }:"
									rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso != 'TRANSFERENCIA_ENTRE_BODEGAS' and registroPesoBean.registroPeso.tipoRegistroPeso != 'RECEPCION_TRANSFERENCIA' and registroPesoBean.registroPeso.tipoRegistroPeso != null and registroPesoBean.registroPeso.tipoRegistroPeso != 'OTROS'}" />
								<p:autoComplete
									rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso != 'TRANSFERENCIA_ENTRE_BODEGAS' and registroPesoBean.registroPeso.tipoRegistroPeso != 'RECEPCION_TRANSFERENCIA' and registroPesoBean.registroPeso.tipoRegistroPeso != null and registroPesoBean.registroPeso.tipoRegistroPeso != 'OTROS'}"
									queryDelay="#{sesionControler.retrasoFiltro}" styleClass="input-text" value="#{registroPesoBean.registroPeso.empresa}"
									completeMethod="#{registroPesoBean.autocompletarEmpresa}" var="_empresa" itemLabel="#{_empresa.nombreFiscal}" itemValue="#{_empresa}"
									forceSelection="true" dropdown="true" minQueryLength="2" id="autoEmpresa" required="true"
									disabled="#{registroPesoBean.registroPeso.idRegistroPeso != 0}">
									<p:column headerText="#{msgs.lbl_empresa_identificacion}">#{_empresa.identificacion}</p:column>
									<p:column headerText="#{msgs.lbl_empresa_nombre_fiscal}">#{_empresa.nombreFiscal}</p:column>
									<p:column headerText="#{msgs.lbl_empresa_nombre_comercial}">#{_empresa.nombreComercial}</p:column>
									<p:ajax listener="#{registroPesoBean.actualizarEmpresaListener}" process="@this" event="itemSelect" global="false" update=":form:panelNuevo" />
								</p:autoComplete>

								<!-- CAMPO FACTURA PARA EL PROCESO DE DEVOLUCION CLIENTE -->
								<h:panelGroup rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DEVOLUCION_CLIENTE'}">
									<p:outputLabel for="autoFactura" value="#{msgs.lbl_factura}:" />
									<p:commandButton id="btnCargarFactura" title="#{msgs.btn_cargar_ultima_factura}" icon="ui-icon-arrowstop-1-n"
										update="autoFactura :form:panelDevolucionCliente" actionListener="#{registroPesoBean.seleccionarUltimaFactura}" process="@this"
										disabled="#{registroPesoBean.registroPeso.idRegistroPeso != 0}" />
								</h:panelGroup>
								<p:autoComplete rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DEVOLUCION_CLIENTE'}"
									disabled="#{registroPesoBean.registroPeso.idRegistroPeso != 0}" queryDelay="#{sesionControler.retrasoFiltro}" styleClass="input-text"
									id="autoFactura" value="#{registroPesoBean.facturaCliente}" completeMethod="#{registroPesoBean.autocompletarFacturas}" var="_factura"
									itemLabel="#{_factura.numero}" itemValue="#{_factura}" forceSelection="true" dropdown="true" minQueryLength="2">
									<p:column>
										<h:outputText value="#{_factura.numero}" />
									</p:column>
									<p:column>
										<h:outputText value=" #{_factura.fecha}">
											<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
										</h:outputText>
									</p:column>
									<p:ajax listener="#{registroPesoBean.actualizarFactura}" process="@this" event="itemSelect" update="autoFactura :form:panelDevolucionCliente" />
								</p:autoComplete>
								<!-- AUTOCOMPLETAR ORDEN SALIDA DE MATERIAL PARA TRANSFERENCIA ENTRE BODEGAS -->

								<p:outputLabel for="autoOrdenSalidaMaterial" value="#{msgs.lbl_orden_salida_material}:"
									rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}" />
								<p:autoComplete rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}"
									disabled="#{registroPesoBean.registroPeso.idRegistroPeso != 0}" queryDelay="#{sesionControler.retrasoFiltro}" styleClass="input-text"
									id="autoOrdenSalidaMaterial" value="#{registroPesoBean.ordenSalidaMaterial}"
									completeMethod="#{registroPesoBean.autocompletarOrdenSalidaMaterial}" var="_osm" itemLabel="#{_osm.numero}" itemValue="#{_osm}"
									forceSelection="true" dropdown="true" minQueryLength="2">
									<p:column>
										<h:outputText value="#{_osm.numero}" />
									</p:column>
									<p:column>
										<h:outputText value=" #{_osm.fecha}">
											<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
										</h:outputText>
									</p:column>
									<p:ajax listener="#{registroPesoBean.actualizarOrdenSalidaMaterial(true)}" process="@this" event="itemSelect"
										update="autoOrdenSalidaMaterial :form:panelCabecera :form:panelOrdenSalidaMaterial" />
								</p:autoComplete>

								<p:outputLabel for="txtCargaOtros" value="#{msgs.lbl_carga}:" rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'OTROS'}" />
								<p:inputText styleClass="input-text" value="#{registroPesoBean.registroPeso.cargaOtros}" id="txtCargaOtros" required="true"
									rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'OTROS'}">
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:inputText>

								<p:spacer
									rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'RECEPCION_TRANSFERENCIA' or registroPesoBean.registroPeso.tipoRegistroPeso == null}" />
								<p:spacer
									rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'RECEPCION_TRANSFERENCIA' or registroPesoBean.registroPeso.tipoRegistroPeso == null}" />

								<p:outputLabel for="txtDescripcion" value="#{msgs.lbl_descripcion}:" />
								<p:inputTextarea styleClass="input-text" value="#{registroPesoBean.registroPeso.descripcion}" id="txtDescripcion">
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:inputTextarea>

							</h:panelGrid>
						</p:panel>

						<!-- INICIO INGRESO_MATERIA_PRIMA -->
						<p:panel id="panelOrdenCompra" rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA'}">

							<h:panelGrid columns="4" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor">
								<p:outputLabel for="cboPedido" value="#{msgs.lbl_orden_compra}:" />
								<p:selectOneMenu value="#{registroPesoBean.pedidoProveedor}" id="cboPedido" required="true">
									<f:selectItem itemValue="" itemLabel="#{msgs.lbl_seleccione}" />
									<f:selectItems value="#{registroPesoBean.listaPedidoProveedor}" var="_pedidoProveedor" itemLabel="#{_pedidoProveedor.numero}"
										itemValue="#{_pedidoProveedor}" />
									<p:ajax process="@this" update=":form:panelOrdenCompra :form:cboBodega" listener="#{registroPesoBean.cargarDetallePedidoListener(true)}"
										global="false" />
								</p:selectOneMenu>
								<p:outputLabel value="#{msgs.lbl_direccion}:" />
								<h:outputText value="#{registroPesoBean.registroPeso.direccion}" />
							</h:panelGrid>

							<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{registroPesoBean.listaDetallePedidoProveedor}"
								id="tablaDetallePedidoProveedor" rowIndexVar="secuencial" binding="#{registroPesoBean.dtDetallePedidoProveedor}"
								emptyMessage="#{msgs.msg_no_hay_datos}" var="_detallePedidoProveedor" paginator="false" style="width:100%"
								rowKey="#{_detallePedidoProveedor.rowKey}" selectionMode="single" selection="#{registroPesoBean.registroPeso.detallePedidoProveedor}">
								<p:ajax event="rowSelect" process=":form:panelOrdenCompra" update=":form:cboBodega :form:panelPesadas" global="false" partialSubmit="true"
									listener="#{registroPesoBean.actualizarDetallePedidoProveedor}" oncomplete="nextFocus('cboBodega_focus')" />
								<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
									<h:outputText value="#{secuencial+1}" />
								</p:column>
								<p:column styleClass="columnaDTCodigoProducto tableCell" headerText="#{msgs.lbl_codigo_producto}">
									<h:outputText value="#{_detallePedidoProveedor.producto.codigo}" />
								</p:column>
								<p:column styleClass="tableCell" headerText="#{msgs.lbl_nombre_producto}">
									<h:outputText value="#{_detallePedidoProveedor.producto.nombre}" />
								</p:column>
								<p:column styleClass="columnaDTNombreCorto tableCell" headerText="#{msgs.lbl_unidad}">
									<h:outputText value="#{_detallePedidoProveedor.unidadCompra.nombre}" />
								</p:column>
								<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha} #{msgs.lbl_pedido}">
									<h:outputText value="#{_detallePedidoProveedor.pedidoProveedor.fecha}">
										<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
									</h:outputText>
								</p:column>
								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso_unitario}">
									<h:outputText value="#{_detallePedidoProveedor.producto.peso}">
									</h:outputText>
								</p:column>
								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_cantidad} #{msgs.lbl_pedido}">
									<h:outputText value="#{_detallePedidoProveedor.cantidad}">
									</h:outputText>
								</p:column>
								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso}">
									<h:outputText value="#{registroPesoBean.getPesoProducto(_detallePedidoProveedor.producto, _detallePedidoProveedor.cantidad)}" />
								</p:column>
								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_saldo} x #{msgs.lbl_recibir}">
									<h:outputText value="#{_detallePedidoProveedor.cantidadPorRecibir}">
									</h:outputText>
								</p:column>
								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso_recibir}">
									<h:outputText value="#{registroPesoBean.getPesoProducto(_detallePedidoProveedor.producto, _detallePedidoProveedor.cantidadPorRecibir)}" />
								</p:column>

								<p:columnGroup type="footer" id="panelTotal">
									<p:row>
										<p:column colspan="6" footerText="#{msgs.lbl_total}:" style="text-align:right">
										</p:column>
										<p:column>
											<f:facet name="footer">
												<h:outputText value="#{registroPesoBean.totalCantidadPedidoProveedor}" style="text-align:right">
												</h:outputText>
											</f:facet>
										</p:column>
										<p:column>
											<f:facet name="footer">
												<h:outputText value="#{registroPesoBean.totalPesoPedidoProveedor}" style="text-align:right">
												</h:outputText>
											</f:facet>
										</p:column>
										<p:column>
											<f:facet name="footer">
												<h:outputText value="#{registroPesoBean.totalCantidadPorRecibirPedidoProveedor}" style="text-align:right">
												</h:outputText>
											</f:facet>
										</p:column>
										<p:column>
											<f:facet name="footer">
												<h:outputText value="#{registroPesoBean.totalPesoPorRecibirPedidoProveedor}" style="text-align:right">
												</h:outputText>
											</f:facet>
										</p:column>
									</p:row>
								</p:columnGroup>

							</p:dataTable>
						</p:panel>

						<!-- INICIO RECEPCION_TRANSFERENCIA -->
						<p:panel id="panelTransferenciaBodega" rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'RECEPCION_TRANSFERENCIA'}">
							<h:panelGrid columns="4" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor">
								<p:outputLabel for="cboTransferencia" value="#{msgs.lbl_transferencia}:" />
								<p:selectOneMenu value="#{registroPesoBean.transferenciaBodega}" id="cboTransferencia" required="true">
									<f:selectItem itemValue="" itemLabel="#{msgs.lbl_seleccione}" />
									<f:selectItems value="#{registroPesoBean.listaTransferenciaBodega}" var="_transferenciaBodega" itemLabel="#{_transferenciaBodega.numero}"
										itemValue="#{_transferenciaBodega}" />
									<p:ajax process="@this" update=":form:panelTransferenciaBodega :form:panelInformacionGeneral"
										listener="#{registroPesoBean.cargarDetalleTransferenciaBodega(true)}" global="false" />
								</p:selectOneMenu>
								<p:spacer />
								<p:spacer />
							</h:panelGrid>

							<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{registroPesoBean.listaDetalleTransferenciaBodega}"
								id="tablaDetalleTransferenciaBodega" rowIndexVar="secuencial" binding="#{registroPesoBean.dtDetalleTransferenciaBodega}"
								emptyMessage="#{msgs.msg_no_hay_datos}" var="_detalleTransferenciaBodega" paginator="false" style="width:100%"
								rowKey="#{_detalleTransferenciaBodega.rowKey}" selectionMode="single" selection="#{registroPesoBean.registroPeso.detalleTransferenciaBodega}">
								<p:ajax event="rowSelect" process=":form:panelTransferenciaBodega" update=":form:panelPesadas :form:panelInformacionGeneral" global="false"
									partialSubmit="true" listener="#{registroPesoBean.actualizarDetalleTransferenciaBodega}" />

								<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
									<h:outputText value="#{secuencial+1}" />
								</p:column>

								<p:column styleClass="columnaDTCodigoProducto tableCell" headerText="#{msgs.lbl_codigo_producto}">
									<h:outputText value="#{_detalleTransferenciaBodega.producto.codigo}" />
								</p:column>

								<p:column styleClass="tableCell" headerText="#{msgs.lbl_nombre_producto}">
									<h:outputText value="#{_detalleTransferenciaBodega.producto.nombre}" />
								</p:column>

								<p:column styleClass="columnaDTNombreCorto tableCell" headerText="#{msgs.lbl_unidad}">
									<h:outputText value="#{_detalleTransferenciaBodega.unidadConversion.nombre}" />
								</p:column>

								<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha} #{msgs.lbl_transferencia}">
									<h:outputText value="#{_detalleTransferenciaBodega.movimientoInventario.fecha}">
										<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
									</h:outputText>
								</p:column>

								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso_unitario}">
									<h:outputText value="#{_detalleTransferenciaBodega.producto.peso}" />
								</p:column>

								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_cantidad} #{msgs.lbl_transferencia}">
									<h:outputText value="#{_detalleTransferenciaBodega.cantidad}">
									</h:outputText>
								</p:column>

								<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso}">
									<h:outputText value="#{_detalleTransferenciaBodega.pesoProducto}" />
								</p:column>

								<p:columnGroup type="footer" id="panelTotal">
									<p:row>
										<p:column colspan="6" footerText="#{msgs.lbl_total}:" style="text-align:right">
										</p:column>
										<p:column>
											<f:facet name="footer">
												<h:outputText value="#{registroPesoBean.totalCantidadTransferencia}" style="text-align:right">
												</h:outputText>
											</f:facet>
										</p:column>
										<p:column>
											<f:facet name="footer">
												<h:outputText value="#{registroPesoBean.totalPesoTransferencia}" style="text-align:right">
												</h:outputText>
											</f:facet>
										</p:column>
									</p:row>
								</p:columnGroup>

							</p:dataTable>
						</p:panel>

						<!-- INICIO DESPACHO_CLIENTE -->
						<p:panel id="panelPedidoCliente" rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'}">
							<h:panelGrid columns="4" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor">
								<p:outputLabel for="cboPedidoCliente" value="#{msgs.lbl_pedido_cliente}:" />
								<p:selectOneMenu value="#{registroPesoBean.pedidoCliente}" id="cboPedidoCliente" required="true">
									<f:selectItem itemValue="" itemLabel="#{msgs.lbl_seleccione}" />
									<f:selectItems value="#{registroPesoBean.listaPedidoCliente}" var="_pedidoCliente" itemLabel="#{_pedidoCliente.numero}"
										itemValue="#{_pedidoCliente}" />
									<p:ajax process="@this" update=":form:panelPedidoCliente :form:panelCabecera"
										listener="#{registroPesoBean.cargarDetallePedidoListener(true)}" global="false" />
								</p:selectOneMenu>

								<p:outputLabel value="#{msgs.lbl_direccion}:" />
								<h:outputText value="#{registroPesoBean.registroPeso.direccion}" />
							</h:panelGrid>
							<h:panelGroup id="panelTablaDetallePedidoCliente">
								<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{registroPesoBean.listaDetallePedidoCliente}"
									id="tablaDetallePedidoCliente" rowIndexVar="secuencial" binding="#{registroPesoBean.dtDetallePedidoCliente}"
									emptyMessage="#{msgs.msg_no_hay_datos}" var="_detallePedidoCliente" paginator="false" style="width:100%"
									rowKey="#{_detallePedidoCliente.rowKey}" selection="#{registroPesoBean.listaDetallePedidoClienteSeleccionados}">
									<p:ajax event="rowSelect" process=":form:panelTablaDetallePedidoCliente" update=":form:panelPesadas :form:panelDetalles :form:panelPesadas"
										global="false" partialSubmit="true" listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowUnselect" process=":form:panelTablaDetallePedidoCliente" update=":form:panelPesadas :form:panelDetalles :form:panelPesadas"
										global="false" partialSubmit="true" listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="toggleSelect" process=":form:panelTablaDetallePedidoCliente"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowSelectCheckbox" process=":form:panelTablaDetallePedidoCliente"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowUnselectCheckbox" process=":form:panelTablaDetallePedidoCliente"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
										<h:outputText value="#{secuencial+1}" />
									</p:column>
									<p:column styleClass="columnaDTAccion tableCell" selectionMode="multiple">
									</p:column>
									<p:column styleClass="columnaDTCodigoProducto tableCell" headerText="#{msgs.lbl_codigo_producto}">
										<h:outputText value="#{_detallePedidoCliente.producto.codigo}" />
									</p:column>
									<p:column styleClass="tableCell" headerText="#{msgs.lbl_nombre_producto}">
										<h:outputText value="#{_detallePedidoCliente.producto.nombre}" />
									</p:column>
									<p:column styleClass="columnaDTNombreCorto tableCell" headerText="#{msgs.lbl_unidad}">
										<h:outputText value="#{_detallePedidoCliente.unidadVenta.nombre}" />
									</p:column>
									<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha} #{msgs.lbl_pedido}">
										<h:outputText value="#{_detallePedidoCliente.pedidoCliente.fecha}">
											<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
										</h:outputText>
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso_unitario}">
										<h:outputText value="#{_detallePedidoCliente.producto.peso}" />
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_cantidad} #{msgs.lbl_pedido}">
										<h:outputText value="#{_detallePedidoCliente.cantidad}">
										</h:outputText>
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso}">
										<h:outputText value="#{registroPesoBean.getPesoProducto(_detallePedidoCliente.producto, _detallePedidoCliente.cantidad)}" />
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_saldo} x #{msgs.lbl_despachar}">
										<h:outputText value="#{_detallePedidoCliente.cantidadPorDespachar}">
										</h:outputText>
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso_despachar}">
										<h:outputText value="#{registroPesoBean.getPesoProducto(_detallePedidoCliente.producto, _detallePedidoCliente.cantidadPorDespachar)}" />
									</p:column>

									<p:columnGroup type="footer" id="panelTotal">
										<p:row>
											<p:column colspan="7" footerText="#{msgs.lbl_total}:" style="text-align:right">
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{registroPesoBean.totalCantidadPedidoCliente}" style="text-align:right">
													</h:outputText>
												</f:facet>
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{registroPesoBean.totalPesoPedidoCliente}" style="text-align:right">
													</h:outputText>
												</f:facet>
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{registroPesoBean.totalCantidadPorRecibirPedidoCliente}" style="text-align:right">
													</h:outputText>
												</f:facet>
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{registroPesoBean.totalPesoPorRecibirPedidoCliente}" style="text-align:right">
													</h:outputText>
												</f:facet>
											</p:column>
										</p:row>
									</p:columnGroup>

								</p:dataTable>
							</h:panelGroup>
						</p:panel>

						<!-- TRANSFERENCIA ENTRE BODEGAS -->
						<p:panel id="panelOrdenSalidaMaterial" rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'TRANSFERENCIA_ENTRE_BODEGAS'}">
							<h:panelGroup id="panelTablaDetalleOrdenSalidaMaterial">
								<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{registroPesoBean.listaDetalleOrdenSalidaMaterial}"
									id="tablaDetalleOrdenSalidaMaterial" rowIndexVar="secuencial" binding="#{registroPesoBean.dtDetalleOrdenSalidaMaterial}"
									emptyMessage="#{msgs.msg_no_hay_datos}" var="_detalleOrdenSalidaMaterial" paginator="false" style="width:100%"
									rowKey="#{_detalleOrdenSalidaMaterial.rowKey}" selection="#{registroPesoBean.listaDetalleOrdenSalidaMaterialSeleccionados}">
									<p:ajax event="rowSelect" process=":form:panelTablaDetalleOrdenSalidaMaterial"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowUnselect" process=":form:panelTablaDetalleOrdenSalidaMaterial"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="toggleSelect" process=":form:panelTablaDetalleOrdenSalidaMaterial"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowSelectCheckbox" process=":form:panelTablaDetalleOrdenSalidaMaterial"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowUnselectCheckbox" process=":form:panelTablaDetalleOrdenSalidaMaterial"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
										<h:outputText value="#{secuencial+1}" />
									</p:column>
									<p:column styleClass="columnaDTAccion tableCell" selectionMode="multiple">
									</p:column>
									<p:column styleClass="columnaDTCodigoProducto tableCell" headerText="#{msgs.lbl_codigo_producto}">
										<h:outputText value="#{_detalleOrdenSalidaMaterial.producto.codigo}" />
									</p:column>
									<p:column styleClass="tableCell" headerText="#{msgs.lbl_nombre_producto}">
										<h:outputText value="#{_detalleOrdenSalidaMaterial.producto.nombre}" />
									</p:column>
									<p:column styleClass="columnaDTNombreCorto tableCell" headerText="#{msgs.lbl_unidad}">
										<h:outputText value="#{_detalleOrdenSalidaMaterial.unidad.nombre}" />
									</p:column>
									<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha}">
										<h:outputText value="#{_detalleOrdenSalidaMaterial.ordenSalidaMaterial.fecha}">
											<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
										</h:outputText>
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso_unitario}">
										<h:outputText value="#{_detalleOrdenSalidaMaterial.producto.peso}" />
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_cantidad}">
										<h:outputText value="#{_detalleOrdenSalidaMaterial.cantidad}">
										</h:outputText>
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso}">
										<h:outputText value="#{registroPesoBean.getPesoProducto(_detalleOrdenSalidaMaterial.producto, _detalleOrdenSalidaMaterial.cantidad)}" />
									</p:column>
									<p:columnGroup type="footer" id="panelTotal">
										<p:row>
											<p:column colspan="7" footerText="#{msgs.lbl_total}:" style="text-align:right">
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{registroPesoBean.totalCantidadOrdenSalidaMaterial}" style="text-align:right">
													</h:outputText>
												</f:facet>
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{registroPesoBean.totalPesoOrdenSalidaMaterial}" style="text-align:right">
													</h:outputText>
												</f:facet>
											</p:column>
										</p:row>
									</p:columnGroup>
								</p:dataTable>
							</h:panelGroup>
						</p:panel>

						<!-- DEVOLUCION CLIENTE -->
						<p:panel id="panelDevolucionCliente" rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DEVOLUCION_CLIENTE'}">
							<h:panelGroup id="panelTablaDetalleDevolucion">
								<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{registroPesoBean.listaDetalleFacturaCliente}"
									id="tablaDetalleFacturaCliente" rowIndexVar="secuencial" binding="#{registroPesoBean.dtDetalleFacturaCliente}"
									emptyMessage="#{msgs.msg_no_hay_datos}" var="_detalleFacturaCliente" paginator="false" style="width:100%"
									rowKey="#{_detalleFacturaCliente.rowKey}" selection="#{registroPesoBean.listaDetalleFacturaClienteSeleccionados}">
									<p:ajax event="rowSelect" process="@this :form:tablaDetalleFacturaCliente" update=":form:panelPesadas :form:panelDetalles :form:panelPesadas"
										global="false" partialSubmit="true" listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowUnselect" process="@this :form:tablaDetalleFacturaCliente"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="toggleSelect" process="@this :form:tablaDetalleFacturaCliente"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowSelectCheckbox" process="@this :form:tablaDetalleFacturaCliente"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:ajax event="rowUnselectCheckbox" process="@this :form:tablaDetalleFacturaCliente"
										update=":form:panelPesadas :form:panelDetalles :form:panelPesadas" global="false" partialSubmit="true"
										listener="#{registroPesoBean.actualizarDetalleRegistroPeso}" />
									<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
										<h:outputText value="#{secuencial+1}" />
									</p:column>
									<p:column styleClass="columnaDTAccion tableCell" selectionMode="multiple">
									</p:column>
									<p:column styleClass="columnaDTCodigoProducto tableCell" headerText="#{msgs.lbl_codigo_producto}">
										<h:outputText value="#{_detalleFacturaCliente.producto.codigo}" />
									</p:column>
									<p:column styleClass="tableCell" headerText="#{msgs.lbl_nombre_producto}">
										<h:outputText value="#{_detalleFacturaCliente.producto.nombre}" />
									</p:column>
									<p:column styleClass="columnaDTNombreCorto tableCell" headerText="#{msgs.lbl_unidad}">
										<h:outputText value="#{_detalleFacturaCliente.unidadVenta.nombre}" />
									</p:column>
									<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha}">
										<h:outputText value="#{_detalleFacturaCliente.facturaCliente.fecha}">
											<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
										</h:outputText>
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso_unitario}">
										<h:outputText value="#{_detalleFacturaCliente.producto.peso}" />
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_cantidad}">
										<h:outputText value="#{_detalleFacturaCliente.cantidad}" />
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_peso}">
										<h:outputText value="#{registroPesoBean.getPesoProducto(_detalleFacturaCliente.producto, _detalleFacturaCliente.cantidad)}" />
									</p:column>
									<p:column styleClass="columnaDTValor tableCell" headerText="#{msgs.lbl_cantidad_a_devolver}"
										rendered="#{registroPesoBean.registroPeso.estado == 'PRIMER_PESO'}">
										<p:inputText styleClass="input-text" id="txtCantidadADevolver" value="#{_detalleFacturaCliente.cantidadADevolver}"
											disabled="#{_detalleFacturaCliente.producto.indicadorLote}">
											<p:ajax process="@this" global="false" update="@this" listener="#{registroPesoBean.actualizarCantidades}" />
											<f:validateBean />
										</p:inputText>
									</p:column>
								</p:dataTable>
							</h:panelGroup>
						</p:panel>

						<p:outputPanel id="panelDetalles">

							<!-- INFORMACION LOTES -->
							<p:dialog header="#{msgs.lbl_lote}s" widgetVar="informacionLotesDialog" id="informacionLotesDialog" modal="true" height="220" width="900"
								showEffect="slide" hideEffect="slide">
								<p:panel id="panelLotes" rendered="#{registroPesoBean.indicadorLote}">
									<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{registroPesoBean.listaDetalleRegistroPeso}"
										id="tablaDetalleRegistroPeso" rowIndexVar="secuencial" binding="#{registroPesoBean.dtDetalleRegistroPeso}"
										emptyMessage="#{msgs.msg_no_hay_datos}" var="_detalle" paginator="false" style="width:100%" rowKey="#{_detalle.rowKey}"
										selectionMode="single">
										<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
											<h:outputText value="#{secuencial+1}" />
										</p:column>
										<p:column styleClass="columnaDTNombre tableCell" headerText="#{msgs.lbl_producto}" filterBy="#{_detalle.producto.nombre}">
											<h:outputText value="#{_detalle.producto.nombre}" />
										</p:column>
										<p:column styleClass="columnaDTNombre tableCell" headerText="#{msgs.lbl_producto}" filterBy="#{_detalle.producto.nombre}">
											<h:outputText value="#{_detalle.producto.nombre}" />
										</p:column>
										<p:column styleClass="columnaDTUnidad tableCell" headerText="#{msgs.lbl_unidad}">
											<h:outputText value="#{registroPesoBean.getUnidadProducto(_detalle.producto.id)}" />
										</p:column>
										<p:column styleClass="columnaDTLote tableCell" headerText="#{msgs.lbl_lote}" filterBy="#{_detalle.lote.codigo}">
											<h:outputText value="#{_detalle.lote.codigo}" />
										</p:column>
										<p:column styleClass="columnaDTLote tableCell" headerText="#{msgs.lbl_fecha_caducidad}">
											<h:outputText value="#{_detalle.lote.fechaCaducidad}">
												<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
											</h:outputText>
										</p:column>
										<p:column styleClass="tableCell columnaDTValor" headerText="#{msgs.lbl_inventario}">
											<h:outputText value="#{_detalle.saldoInventario}" />
										</p:column>
										<p:column styleClass="tableCell columnaDTValor" headerText="#{msgs.lbl_comprometido}">
											<h:outputText value="#{_detalle.saldoComprometido}" />
										</p:column>
										<p:column styleClass="tableCell columnaDTValor" headerText="#{msgs.lbl_saldo}">
											<h:outputText value="#{_detalle.saldo}" />
										</p:column>
										<p:column styleClass="tableCell columnaDTValor" headerText="#{msgs.lbl_cantidad}">
											<p:inputText value="#{_detalle.cantidad}">
												<p:ajax process="@this" global="false" listener="#{registroPesoBean.totalizarDetalles}" update=":form:panelLotes :form:panelPesadas" />
												<f:validateBean />
											</p:inputText>
										</p:column>
										<p:column styleClass="tableCell columnaDTAccion">
											<p:commandButton id="btnEliminarDetalle" action="#{registroPesoBean.eliminarDetalle}" icon="ui-icon-trash" title="#{msgs.lbl_eliminar}"
												update=":form:panelLotes :form:panelPesadas" process="@this" />
										</p:column>
										<p:columnGroup type="footer" id="panelTotal">
											<p:row>
												<p:column colspan="9" footerText="#{msgs.lbl_total}:" style="text-align:right">
												</p:column>
												<p:column footerText="#{registroPesoBean.registroPeso.totalDetalles}" style="text-align:right" id="txtTotal" />
												<p:column />
											</p:row>
										</p:columnGroup>
									</p:dataTable>
								</p:panel>
								<f:facet name="footer">
									<center>
										<p:commandButton id="btnCancelarLote" value="#{msgs.btn_salir}" oncomplete="PF('informacionLotesDialog').hide();" process="@this" />
									</center>
								</f:facet>
							</p:dialog>

							<h:panelGrid columns="4" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor"
								rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso != 'RECEPCION_TRANSFERENCIA' and registroPesoBean.registroPeso.tipoRegistroPeso != 'INGRESO_MATERIA_PRIMA'}">
								<p:commandButton value="#{msgs.btn_mostrar} #{msgs.lbl_lote}s" oncomplete="PF('informacionLotesDialog').show();" process="@this"
									update=":form:panelLotes" rendered="#{registroPesoBean.indicadorLote}" />
								<p:spacer rendered="#{registroPesoBean.indicadorLote}" />
								<p:spacer rendered="#{registroPesoBean.indicadorLote}" />
								<p:spacer rendered="#{registroPesoBean.indicadorLote}" />
								<p:outputLabel for="autoCargaPreviaPC" value="#{msgs.lbl_cargas_previas}:" />
								<p:autoComplete id="autoCargaPreviaPC" multiple="true" value="#{registroPesoBean.listaCargaPrevia}"
									completeMethod="#{registroPesoBean.autocompletarCargaPrevia}" var="_carga" itemLabel="#{_carga}" itemValue="#{_carga}" forceSelection="true">
									<p:column headerText="#{msgs.lbl_nombre}">#{_carga}</p:column>
									<p:ajax process="@this" event="itemSelect" global="false" listener="#{registroPesoBean.agregarCargasAnteriores}" />
									<p:ajax process="@this" event="itemUnselect" global="false" listener="#{registroPesoBean.agregarCargasAnteriores}" />
									<p:ajax process="@this" event="change" global="false" listener="#{registroPesoBean.agregarCargasAnteriores}" />
								</p:autoComplete>
								<p:outputLabel for="cboBodegaPC" value="#{msgs.lbl_bodega}:" />
								<p:selectOneMenu styleClass="input-text" id="cboBodegaPC" required="true" value="#{registroPesoBean.registroPeso.bodega}" disabled="true">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaBodega}" var="_bodega" itemLabel="#{_bodega.nombre}" itemValue="#{_bodega}" />
									<p:ajax process="@this" global="false" listener="#{registroPesoBean.actualizarTodosSaldos}" update=":form:panelLotes" />
									<f:validateBean />
								</p:selectOneMenu>
							</h:panelGrid>

						</p:outputPanel>


						<p:panel id="panelInformacionGeneral"
							rendered="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'RECEPCION_TRANSFERENCIA' or registroPesoBean.registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA'}">
							<h:panelGrid columns="4" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor">

								<p:outputLabel for="autoCargaPrevia" value="#{msgs.lbl_cargas_previas}:" />
								<p:autoComplete id="autoCargaPrevia" multiple="true" value="#{registroPesoBean.listaCargaPrevia}"
									completeMethod="#{registroPesoBean.autocompletarCargaPrevia}" var="_carga" itemLabel="#{_carga}" itemValue="#{_carga}" forceSelection="true">
									<p:column headerText="#{msgs.lbl_nombre}">#{_carga}</p:column>
									<p:ajax process="@this" event="itemSelect" global="false" listener="#{registroPesoBean.agregarCargasAnteriores}" />
									<p:ajax process="@this" event="itemUnselect" global="false" listener="#{registroPesoBean.agregarCargasAnteriores}" />
									<p:ajax process="@this" event="change" global="false" listener="#{registroPesoBean.agregarCargasAnteriores}" />
								</p:autoComplete>
								<p:outputLabel for="txtGuia" value="#{msgs.lbl_guia_remision}:" />
								<p:inputText styleClass="input-text" id="txtGuia" value="#{registroPesoBean.registroPeso.numeroGuiaRemision}"
									required="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA'}"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso != 'INGRESO_MATERIA_PRIMA'}">
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:inputText>
								<p:outputLabel for="cboBodega" value="#{msgs.lbl_bodega}:" />
								<p:selectOneMenu styleClass="input-text" id="cboBodega" required="true" value="#{registroPesoBean.registroPeso.bodega}"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso != 'INGRESO_MATERIA_PRIMA' or registroPesoBean.registroPeso.detallePedidoProveedor == null or registroPesoBean.registroPeso.estado=='PRIMER_PESO'}">
									<f:selectItem itemLabel="#{msgs.lbl_seleccione}" itemValue="" />
									<f:selectItems value="#{registroPesoBean.listaBodega}" var="_bodega" itemLabel="#{_bodega.nombre}" itemValue="#{_bodega}" />
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:selectOneMenu>
								<p:outputLabel for="txtPesoReferencia" value="#{msgs.lbl_referencia_peso}:" />
								<p:inputText styleClass="input-text" id="txtPesoReferencia"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'RECEPCION_TRANSFERENCIA'}"
									value="#{registroPesoBean.registroPeso.pesoReferencia}" required="true">
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:inputText>

							</h:panelGrid>
						</p:panel>

						<p:panel id="panelPesadas" rendered="#{registroPesoBean.registroPeso.id != 0}">
							<h:panelGrid columns="4" columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor">

								<p:outputLabel for="cboDispositivo" value="#{msgs.lbl_dispositivo}:" />
								<p:selectOneMenu styleClass="input-text" value="#{registroPesoBean.registroPeso.dispositivo}" id="cboDispositivo" required="true">
									<f:selectItem itemValue="" itemLabel="#{msgs.lbl_seleccione}" />
									<f:selectItems value="#{registroPesoBean.listaDispositivo}" var="_dispositivo" itemLabel="#{_dispositivo.nombre} (#{_dispositivo.ip})"
										itemValue="#{_dispositivo}" />
									<p:ajax process="@this" update=":form:panelPesadas" global="false" partialSubmit="true" />
									<f:validateBean />
								</p:selectOneMenu>
								<h:outputText styleClass="color_amarillo" value="#{registroPesoBean.pesoActual}" id="txtPesoActual"
									rendered="#{!registroPesoBean.registroPeso.dispositivo.fueraLinea}" />
								<p:inputText styleClass="input-text" id="txtPesoActualManual" rendered="#{registroPesoBean.registroPeso.dispositivo.fueraLinea}"
									value="#{registroPesoBean.pesoActual}">
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:inputText>
								<p:commandButton action="#{registroPesoBean.capturarPeso}" process="@this" update=":form:panelPesadas" partialSubmit="true"
									value="#{msgs.lbl_capturar}" />
								<p:poll async="true" interval="#{registroPesoBean.intervaloRefrescarPesoBalanza}" listener="#{registroPesoBean.actualizarPesada}"
									update="txtPesoActual poll" global="false" rendered="#{registroPesoBean.registroPeso.id != 0}" id="poll" process="@this"
									stop="#{registroPesoBean.editado == false or registroPesoBean.registroPeso.id == 0}" />

							</h:panelGrid>

							<p:separator />
							<h:panelGrid columns="6" columnClasses="columnaEtiqueta,columna25,columnaEtiqueta,columna25,columnaEtiqueta,columna25">

								<h:outputText value="#{msgs.lbl_entrada} #{msgs.lbl_bascula}" style="font-weight: bold;" />
								<p:spacer />
								<p:spacer />
								<p:spacer />
								<p:spacer />
								<p:spacer />
								<h:outputText value="#{msgs.lbl_fecha} #{msgs.lbl_entrada}:" />
								<h:outputText value="#{registroPesoBean.registroPeso.fechaEntrada}">
									<f:convertDateTime pattern="#{registroPesoBean.formatoFecha} HH:mm" timeZone="America/Guayaquil" />
								</h:outputText>
								<h:outputText value="#{msgs.lbl_peso_inicial}:" />
								<h:outputText value="#{registroPesoBean.registroPeso.pesoEntrada}" />
								<h:outputText value="#{msgs.lbl_tara_unitario}:" />
								<p:inputText value="#{registroPesoBean.registroPeso.pesoDestareUnidad}">
									<p:ajax process="@this" global="false" update="txtPesoDestare outPesoNeto txtCantidad" listener="#{registroPesoBean.calcularDestareTotal}" />
								</p:inputText>

							</h:panelGrid>

							<p:separator />

							<h:panelGrid columns="6" columnClasses="columnaEtiqueta,columna25,columnaEtiqueta,columna25,columnaEtiqueta,columna25">

								<h:outputText value="#{msgs.lbl_salida} #{msgs.lbl_bascula}" style="font-weight: bold;" />
								<p:spacer />
								<p:spacer />
								<p:spacer />
								<p:spacer />
								<p:spacer />
								<h:outputText value="#{msgs.lbl_fecha} #{msgs.lbl_salida}:" />
								<h:outputText value="#{registroPesoBean.registroPeso.fechaSalida}">
									<f:convertDateTime pattern="#{registroPesoBean.formatoFecha} HH:mm" timeZone="America/Guayaquil" />
								</h:outputText>
								<h:outputText value="#{msgs.lbl_peso_final}:" />
								<h:outputText value="#{registroPesoBean.registroPeso.pesoSalida}" />
								<h:outputText value="#{msgs.lbl_cantidad}:" />
								<p:inputText value="#{registroPesoBean.registroPeso.cantidad}" id="txtCantidad"
									disabled="#{registroPesoBean.registroPeso.tipoRegistroPeso == 'DESPACHO_CLIENTE'}">
									<p:ajax process="@this" global="false" update="txtPesoDestare outPesoNeto" listener="#{registroPesoBean.calcularDestareTotal}" />
								</p:inputText>
								<h:outputText value="#{msgs.lbl_peso_destare_total}:" />
								<p:inputText value="#{registroPesoBean.registroPeso.pesoDestareTotal}" id="txtPesoDestare">
									<p:ajax process="@this" global="false" update="outPesoNeto" listener="#{registroPesoBean.totalizarPesoNeto}" />
								</p:inputText>
								<h:outputText value="#{msgs.lbl_peso_neto}:" style="font-weight: bold;" />
								<h:outputText value="#{registroPesoBean.registroPeso.pesoNeto}" style="font-weight: bold;" id="outPesoNeto" />

							</h:panelGrid>
						</p:panel>
					</p:panel>
				</p:outputPanel>

				<p:outputPanel id="panelListado">
					<p:panel rendered="#{!registroPesoBean.editado}" header="#{msgs.lbl_panel_listado} #{msgs.lbl_registroPeso_panel}">

						<h:panelGrid columns="2" columnClasses="columnaMitad">
							<h:panelGrid columns="4">
								<p:outputLabel for="calFechaDesde" value="#{msgs.lbl_fecha_desde}:" />
								<p:calendar pattern="#{registroPesoBean.formatoFecha}" showOn="button" navigator="true" value="#{registroPesoBean.fechaDesde}"
									id="calFechaDesde" required="true">
									<p:ajax process="@this" global="false" partialSubmit="true" event="dateSelect" update=":form:panelListado" />
									<p:ajax process="@this" global="false" partialSubmit="true" event="change" update=":form:panelListado" />
									<f:validateBean />
								</p:calendar>
								<p:outputLabel for="calFechaHasta" value="#{msgs.lbl_fecha_hasta}:" />
								<p:calendar pattern="#{registroPesoBean.formatoFecha}" showOn="button" navigator="true" value="#{registroPesoBean.fechaHasta}"
									id="calFechaHasta" required="true">
									<p:ajax process="@this" global="false" partialSubmit="true" event="dateSelect" update=":form:panelListado" />
									<p:ajax process="@this" global="false" partialSubmit="true" event="change" update=":form:panelListado" />
									<f:validateBean />
								</p:calendar>
							</h:panelGrid>
							<p:spacer />
						</h:panelGrid>

						<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" id="tablaRegistroPeso" rowIndexVar="secuencial"
							emptyMessage="#{msgs.msg_no_hay_datos}" value="#{registroPesoBean.listaRegistroPeso}" var="registroPeso"
							binding="#{registroPesoBean.dtRegistroPeso}" paginator="true" paginatorPosition="bottom" style="width:100%"
							rows="#{registroPesoBean.numeroFilas}" rowsPerPageTemplate="#{registroPesoBean.numeroFilasPorPagina}"
							selection="#{registroPesoBean.registroPeso}" selectionMode="single" rowKey="#{registroPeso.rowKey}" sortBy="#{registroPeso.numero}"
							sortOrder="DESCENDING" lazy="true">
							<p:column styleClass="columnaDTAccion" headerText="Nº">
								<h:outputText value="#{secuencial+1}" />
							</p:column>
							<p:column styleClass="columnaDTNumeroDocumento" sortBy="#{registroPeso.numero}" filterBy="#{registroPeso.numero}"
								headerText="#{msgs.lbl_numero}">
								<h:outputText value="#{registroPeso.numero}" />
							</p:column>
							<p:column styleClass="columnaDTFecha tableCell" sortBy="#{registroPeso.fecha}" headerText="#{msgs.lbl_fecha}">
								<h:outputText value="#{registroPeso.fecha}">
									<f:convertDateTime pattern="#{registroPesoBean.formatoFecha}" />
								</h:outputText>
							</p:column>
							<p:column styleClass="columnaDTNombre" sortBy="#{registroPeso.tipoRegistroPeso}" filterOptions="#{registroPesoBean.listaTipoRegistroPesoItem}"
								filterBy="#{registroPeso.tipoRegistroPeso}" headerText="#{msgs.lbl_tipo}">
								<h:outputText value="#{registroPeso.tipoRegistroPeso.nombre}" />
							</p:column>

							<p:column styleClass="columnaDTNumeroDocumento" headerText="#{msgs.lbl_documento_referencia}">

								<h:outputText title="#{msgs.lbl_documento_referencia}" rendered="#{not empty registroPeso.detallePedidoProveedor.pedidoProveedor}"
									value="#{registroPeso.detallePedidoProveedor.pedidoProveedor.numero}" />

								<h:link rendered="#{not empty registroPeso.listaRecepcionProveedor}" target="_blank" outcome="/paginas/compras/procesos/recepcionProveedor"
									value="#{registroPeso.listaRecepcionProveedor.get(0).numero}" includeViewParams="true">
									<f:param name="idRecepcionProveedor" value="#{registroPeso.listaRecepcionProveedor.get(0).id}" />
								</h:link>

								<h:link rendered="#{not empty registroPeso.despachoCliente}" target="_blank" outcome="/paginas/ventas/procesos/despachoCliente"
									value="#{registroPeso.despachoCliente.numero}" includeViewParams="true">
									<f:param name="idDespachoCliente" value="#{registroPeso.despachoCliente.id}" />
								</h:link>

								<h:link rendered="#{not empty registroPeso.transferenciaBodega}" target="_blank" outcome="/paginas/inventario/procesos/transferenciaBodegas"
									value="#{registroPeso.transferenciaBodega.numero}" includeViewParams="true">
									<f:param name="idTransferenciaBodega" value="#{registroPeso.transferenciaBodega.id}" />
								</h:link>

								<h:link rendered="#{not empty registroPeso.devolucionCliente}" target="_blank"
									outcome="/paginas/inventario/procesos/devolucion/devolucionCliente" value="#{registroPeso.devolucionCliente.numero}" includeViewParams="true">
									<f:param name="numeroDevolucion" value="#{registroPeso.devolucionCliente.numero}" />
								</h:link>
							</p:column>

							<p:column styleClass="columnaDTNombre" sortBy="#{registroPeso.empresa.nombreFiscal}" filterBy="#{registroPeso.empresa.nombreFiscal}"
								headerText="#{msgs.lbl_empresa}">
								<h:outputText value="#{registroPeso.empresa.nombreFiscal}" />
							</p:column>
							<p:column styleClass="columnaDTIdentificacion" sortBy="#{registroPeso.empresa.identificacion}"
								filterBy="#{registroPeso.empresa.identificacion}" headerText="#{msgs.lbl_identificacion}">
								<h:outputText value="#{registroPeso.empresa.identificacion}" />
							</p:column>
							<p:column styleClass="columnaDTNombre" sortBy="#{registroPeso.bodega.nombre}" filterBy="#{registroPeso.bodega.nombre}"
								headerText="#{msgs.lbl_bodega}">
								<h:outputText value="#{registroPeso.bodega.nombre}" />
							</p:column>
							<p:column styleClass="columnaDTEstado" sortBy="#{registroPeso.estado}" filterOptions="#{registroPesoBean.listaEstadoRegistroPesoItem}"
								filterBy="#{registroPeso.estado}" headerText="#{msgs.lbl_estado}">
								<h:outputText value="#{registroPeso.estado.nombre}" />
							</p:column>
							<p:column styleClass="columnaDTValor" sortBy="#{registroPeso.pesoNeto}" headerText="#{msgs.lbl_peso_neto}">
								<h:outputText value="#{registroPeso.pesoNeto}" />
							</p:column>
							<p:column styleClass="columnaDTNombre" sortBy="#{registroPeso.producto.nombre}" filterBy="#{registroPeso.producto.nombre}"
								headerText="#{msgs.lbl_producto}">
								<h:outputText value="#{registroPeso.tipoRegistroPeso == 'OTROS' ? registroPeso.cargaOtros : registroPeso.producto.nombre}" />
							</p:column>
							<p:column styleClass="columnaDTNombre" sortBy="#{registroPeso.lote.codigo}" filterBy="#{registroPeso.lote.codigo}"
								headerText="#{msgs.lbl_lote}">
								<h:outputText value="#{registroPeso.lote.codigo}" />
							</p:column>

							<p:column styleClass="columnaDTNombreCorto" sortBy="#{registroPeso.nombreChofer}" headerText="#{msgs.lbl_chofer}">
								<h:outputText value="#{registroPeso.nombreChofer}" />
							</p:column>

							<p:column styleClass="columnaDTNombreCorto" sortBy="#{registroPeso.placaVehiculo}" filterBy="#{registroPeso.placaVehiculo}"
								headerText="#{msgs.lbl_placa}">
								<h:outputText value="#{registroPeso.placaVehiculo}" />
							</p:column>

							<p:column styleClass="" sortBy="#{registroPeso.descripcion}" filterBy="#{registroPeso.descripcion}" headerText="#{msgs.lbl_descripcion}">
								<h:outputText value="#{registroPeso.descripcion}" />
							</p:column>
							<p:column styleClass="columnaDTAccion tableCell" exportable="false">
								<f:facet name="header">
									<h:outputText value="#{msgs.btn_editar}" />
								</f:facet>
								<center>
									<p:commandButton title="#{msgs.btn_editar}" oncomplete="dialogEdicionParcial.show();" icon="ui-icon ui-icon-pencil" process="@this"
										action="#{registroPesoBean.cargarDatosEditarParcial}" update=":form:panelEdicionParcial"
										rendered="#{registroPeso.tipoRegistroPeso == 'INGRESO_MATERIA_PRIMA' and registroPeso.estado == 'SEGUNDO_PESO' and registroPeso.estadoControlCalidad == 'PENDIENTE'}">
									</p:commandButton>
								</center>
							</p:column>
						</p:dataTable>
					</p:panel>

					<p:separator />

					<ui:include src="/template/auditoriaRapida.xhtml">
						<ui:param name="fechaCreacion" value="#{registroPesoBean.registroPeso.fechaCreacion}" />
						<ui:param name="usuarioCreacion" value="#{registroPesoBean.registroPeso.usuarioCreacion}" />

						<ui:param name="fechaModificacion" value="#{registroPesoBean.registroPeso.fechaModificacion}" />
						<ui:param name="usuarioModificacion" value="#{registroPesoBean.registroPeso.usuarioModificacion}" />
					</ui:include>

				</p:outputPanel>
			</p:outputPanel>
		</h:form>
	</ui:define>
</ui:composition>
</html>