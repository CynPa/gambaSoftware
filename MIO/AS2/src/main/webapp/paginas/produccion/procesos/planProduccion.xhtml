<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:as2="http://java.sun.com/jsf/composite/componentes"
	xmlns:tnt="http://java.sun.com/jsf/composite/componentes">
<ui:composition template="/template/template.xhtml">
	<ui:define name="contenido">
		<h:form prependId="false" id="form">
			<p:outputPanel id="panelContenedor">
				<as2:toolBar bean="#{planProduccionBean}">
					<as2:buttonEliminar bean="#{planProduccionBean}" titulo="#{msgs.btn_eliminar}">
						<h:outputText value="#{msgs.lbl_fecha_desde}:" />
						<h:outputText value="#{planProduccionBean.planProduccion.fechaInicio}" />
						<h:outputText value="#{msgs.lbl_fecha_hasta}:" />
						<h:outputText value="#{planProduccionBean.planProduccion.fechaFin}" />
					</as2:buttonEliminar>
					<as2:buttonExportaExcel bean="#{planProduccionBean}" tabla=":form:tablaPlanProduccion" />
					<p:commandButton rendered="#{!planProduccionBean.editado}" value="#{msgs.lbl_solicitar_consumibles}" title="#{msgs.lbl_solicitar_consumibles}"
						process="@this :form:panelListado" update="@this :form:panelSolicitarConsumibles"
						actionListener="#{planProduccionBean.iniciarSolicitudConsumibles}">
					</p:commandButton>
				</as2:toolBar>
				<!-- GENERAR ORDEN TRANSFERENCIA CONSUMIBLES -->
				<p:outputPanel id="panelSolicitarConsumibles">
					<p:dialog header="#{msgs.lbl_solicitar_consumibles}" widgetVar="dialogSolicitarConsumibles" id="dialogSolicitarConsumibles" modal="true"
						height="400" width="850" showEffect="slide" hideEffect="slide">
						<p:outputPanel id="cabeceraSolicitarConsumibles">
							<h:panelGrid columns="4" columnClasses="columna25, columna25, columna25, columna25" cellspacing="0" cellpadding="0">
								<h:panelGroup>
									<h:outputText style="text-align:left;" value="#{planProduccionBean.planProduccion.fecha1}">
										<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
									</h:outputText>
									<h:outputText style="text-align:left;" value=" (L)   " />
									<p:selectBooleanCheckbox value="#{planProduccionBean.planProduccion.indicadorFecha1}">
										<p:ajax process="@this" global="false" listener="#{planProduccionBean.actualizarDetallesSolicitudConsumibles}"
											update=":form:DetallesConsumibles" />
									</p:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup>
									<h:outputText style="text-align:left;" value="#{planProduccionBean.planProduccion.fecha2}">
										<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
									</h:outputText>
									<h:outputText style="text-align:left;" value=" (M)   " />
									<p:selectBooleanCheckbox value="#{planProduccionBean.planProduccion.indicadorFecha2}">
										<p:ajax process="@this" global="false" listener="#{planProduccionBean.actualizarDetallesSolicitudConsumibles}"
											update=":form:DetallesConsumibles" />
									</p:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup>
									<h:outputText style="text-align:left;" value="#{planProduccionBean.planProduccion.fecha3}">
										<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
									</h:outputText>
									<h:outputText style="text-align:left;" value=" (X)   " />
									<p:selectBooleanCheckbox value="#{planProduccionBean.planProduccion.indicadorFecha3}">
										<p:ajax process="@this" global="false" listener="#{planProduccionBean.actualizarDetallesSolicitudConsumibles}"
											update=":form:DetallesConsumibles" />
									</p:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup>
									<h:outputText style="text-align:left;" value="#{planProduccionBean.planProduccion.fecha4}">
										<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
									</h:outputText>
									<h:outputText style="text-align:left;" value=" (J)   " />
									<p:selectBooleanCheckbox value="#{planProduccionBean.planProduccion.indicadorFecha4}">
										<p:ajax process="@this" global="false" listener="#{planProduccionBean.actualizarDetallesSolicitudConsumibles}"
											update=":form:DetallesConsumibles" />
									</p:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup>
									<h:outputText style="text-align:left;" value="#{planProduccionBean.planProduccion.fecha5}">
										<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
									</h:outputText>
									<h:outputText style="text-align:left;" value=" (V)   " />
									<p:selectBooleanCheckbox value="#{planProduccionBean.planProduccion.indicadorFecha5}">
										<p:ajax process="@this" global="false" listener="#{planProduccionBean.actualizarDetallesSolicitudConsumibles}"
											update=":form:DetallesConsumibles" />
									</p:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup>
									<h:outputText style="text-align:left;" value="#{planProduccionBean.planProduccion.fecha6}">
										<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
									</h:outputText>
									<h:outputText style="text-align:left;" value=" (S)   " />
									<p:selectBooleanCheckbox value="#{planProduccionBean.planProduccion.indicadorFecha6}">
										<p:ajax process="@this" global="false" listener="#{planProduccionBean.actualizarDetallesSolicitudConsumibles}"
											update=":form:DetallesConsumibles" />
									</p:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup>
									<h:outputText style="text-align:left;" value="#{planProduccionBean.planProduccion.fecha7}">
										<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
									</h:outputText>
									<h:outputText style="text-align:left;" value=" (D)   " />
									<p:selectBooleanCheckbox value="#{planProduccionBean.planProduccion.indicadorFecha7}">
										<p:ajax process="@this" global="false" listener="#{planProduccionBean.actualizarDetallesSolicitudConsumibles}"
											update=":form:DetallesConsumibles" />
									</p:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGrid columns="2">
									<p:outputLabel for="txtDescripcion2" value="#{msgs.lbl_descripcion}" />
									<p:inputTextarea styleClass="input-text" value="#{planProduccionBean.descripcion}" id="txtDescripcion2">
										<f:validateBean />
									</p:inputTextarea>
								</h:panelGrid>
							</h:panelGrid>
						</p:outputPanel>
						<p:spacer />
						<p:outputPanel id="DetallesConsumibles">
							<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{planProduccionBean.listaDetalleConsumibles}" id="tablaDetalleConsumibles"
								rowIndexVar="secuencial" binding="#{planProduccionBean.dtDetalleConsumibles}" emptyMessage="#{msgs.msg_no_hay_datos}" var="_detalle"
								paginator="true" paginatorPosition="bottom" style="width:100%" rowKey="#{_detalle.rowKey}" rows="#{planProduccionBean.numeroFilas}"
								rowsPerPageTemplate="#{planProduccionBean.numeroFilasPorPagina}" editable="true" editMode="cell"
								filteredValue="#{planProduccionBean.listaDetalleConsumiblesFiltrados}" sortBy="#{_detalle.producto.codigo}">
								<p:column styleClass="tableCell columnaDTAccion" headerText="Nº">
									<h:outputText value="#{secuencial+1}" />
								</p:column>
								<p:column styleClass="tableCell columnaDTCodigoProducto" headerText="#{msgs.lbl_codigo_producto}" filterBy="#{_detalle.producto.codigo}"
									filterMatchMode="contains" sortBy="#{_detalle.producto.codigo}">
									<h:outputText value="#{_detalle.producto.codigo}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTCodigoProducto" headerText="#{msgs.lbl_codigo_alterno}" filterBy="#{_detalle.producto.codigoAlterno}"
									filterMatchMode="contains" sortBy="#{_detalle.producto.codigoAlterno}">
									<h:outputText value="#{_detalle.producto.codigoAlterno}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTNombre" headerText="#{msgs.lbl_nombre_producto}" filterBy="#{_detalle.producto.nombre}"
									filterMatchMode="contains" sortBy="#{_detalle.producto.nombre}">
									<h:outputText value="#{_detalle.producto.nombre}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTNombre" headerText="#{msgs.lbl_categoria_producto}"
									filterBy="#{_detalle.producto.subcategoriaProducto.categoriaProducto.nombre}" filterMatchMode="contains"
									sortBy="#{_detalle.producto.subcategoriaProducto.categoriaProducto.nombre}">
									<h:outputText value="#{_detalle.producto.subcategoriaProducto.categoriaProducto.nombre}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTNombre" headerText="#{msgs.lbl_producto_subcategoria_producto}" filterMatchMode="contains"
									filterBy="#{_detalle.producto.subcategoriaProducto.nombre}" sortBy="#{_detalle.producto.subcategoriaProducto.nombre}">
									<h:outputText value="#{_detalle.producto.subcategoriaProducto.nombre}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTUnidad" headerText="#{msgs.lbl_unidad}">
									<h:outputText value="#{_detalle.unidad.nombre}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTBodega" headerText="#{msgs.lbl_bodega}">
									<h:outputText value="#{_detalle.bodega.nombre}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTValor" headerText="#{msgs.lbl_saldo}">
									<h:outputText value="#{_detalle.saldoBodegaTrabajo}">
									</h:outputText>
								</p:column>
								<p:column styleClass="tableCell columnaDTValor" headerText="#{msgs.lbl_cantidad}">
									<p:inputText size="10" value="#{_detalle.cantidad}">
										<p:ajax process="@this" global="false" />
									</p:inputText>
								</p:column>
							</p:dataTable>
						</p:outputPanel>
						<f:facet name="footer">
							<center>
								<p:commandButton value="#{msgs.btn_aceptar}" action="#{planProduccionBean.generarOrdenSolicitudMaterialConsumibles}"
									process="@this txtDescripcion2" update=":form:panelListado" />
								<p:commandButton value="#{msgs.btn_cancelar}" process="@this" oncomplete="dialogSolicitarConsumibles.hide()" update=":form:panelListado" />
							</center>
						</f:facet>
					</p:dialog>
				</p:outputPanel>
				<!-- FIN - GENERAR ORDEN TRANSFERENCIA CONSUMIBLES -->
				<!-- GENERAR ORDEN PRODUCCION -->
				<p:dialog header="#{msgs.lbl_orden_fabricacion}" widgetVar="dglModalGenerarOrdenProduccion" id="dglModalGenerarOrdenProduccion" modal="true"
					height="60" width="250" showEffect="slide" hideEffect="slide">
					<p:outputPanel id="panelFechaOrdenProduccion">
						<h:panelGrid columns="2" columnClasses="columnaEtiqueta, columnaValor" cellspacing="0" cellpadding="0">
							<p:outputLabel for="calFechaOrdenProduccion" value="#{msgs.lbl_fecha}:" />
							<p:calendar pattern="#{planProduccionBean.formatoFecha}" showOn="button" navigator="true" value="#{planProduccionBean.fechaOrdenProduccion}"
								id="calFechaOrdenProduccion" required="#{planProduccionBean.abiertaVentanaFecha}" styleClass="input-text">
								<p:ajax event="dateSelect" process="@this" global="false" />
								<p:ajax event="change" process="@this" global="false" />
								<f:validateBean />
							</p:calendar>
						</h:panelGrid>
					</p:outputPanel>
					<f:facet name="footer">
						<center>
							<p:commandButton value="#{msgs.btn_aceptar}" action="#{planProduccionBean.generarOrdenProduccion}" process="@this"
								oncomplete="validacionesModal(xhr, status, args, dglModalGenerarOrdenProduccion )" update=":form:panelListado" />
						</center>
					</f:facet>
				</p:dialog>
				<!-- FIN GENERAR ORDEN PRODUCCION -->
				<p:outputPanel id="panelNuevo">
					<ui:include src="/template/listaProductoMultiple.xhtml">
						<ui:param name="bean" value="#{planProduccionBean}" />
						<ui:param name="objetoActualizar" value=":form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
						<ui:param name="listadoFiltrado" value="true" />
						<ui:param name="mostrarCantidad" value="false" />
					</ui:include>
					<tnt:panelImprimir entidadDestino="#{reportePlanProduccion.listaDetallePlanProduccion}" bean="#{reportePlanProduccion}"
						entidadOrigen="#{planProduccionBean.listaDetallePlanProduccion}"></tnt:panelImprimir>
					<p:panel rendered="#{planProduccionBean.editado}" header="#{msgs.lbl_panel_edicion} (#{msgs.lbl_titulo_plan__produccion})">
						<!-- CARGAR ARBOL COMPONENTES -->
						<p:dialog header="#{msgs.lbl_titulo_componentes}" widgetVar="dglModalArbolComponentes" modal="true" height="350" width="1200" showEffect="slide"
							hideEffect="slide">
							<p:outputPanel id="panelArbolComponentes">
								<p:tree value="#{planProduccionBean.root}" var="_producto" orientation="horizontal">
									<p:treeNode>
										<h:outputText value="#{_producto.nombre}" />
										<h:outputText value=" (#{_producto.cantidadProducir})" />
									</p:treeNode>
								</p:tree>
							</p:outputPanel>
						</p:dialog>
						<!-- FIN CARGAR ARBOL COMPONENTES-->
						<!-- CONFIGURAR COLUMNAS VISIBLES -->
						<p:dialog header="#{msgs.lbl_mostrar_columnas}" widgetVar="dglModalMostrarColumnas" modal="true" height="150" width="200" showEffect="slide"
							hideEffect="slide">
							<p:outputPanel id="panelMostrarColumnas">
								<h:panelGrid columns="2" columnClasses="columnaValor,columnaEtiqueta" cellspacing="0" cellpadding="0">
									<p:outputLabel value="#{msgs.lbl_filtros}:" />
									<p:selectBooleanCheckbox value="#{planProduccionBean.mostrarFiltros}">
										<p:ajax process="@this" global="false" update="form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
										<f:validateBean />
									</p:selectBooleanCheckbox>
									<p:outputLabel value="#{msgs.lbl_configuracion}:" />
									<p:selectBooleanCheckbox value="#{planProduccionBean.mostrarConfiguracion}">
										<p:ajax process="@this" global="false" update="form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
										<f:validateBean />
									</p:selectBooleanCheckbox>
									<p:outputLabel value="#{msgs.lbl_ventas_semana_anterior}:" />
									<p:selectBooleanCheckbox value="#{planProduccionBean.mostrarVentasPrevias}">
										<p:ajax process="@this" global="false" update="form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
										<f:validateBean />
									</p:selectBooleanCheckbox>
									<p:outputLabel value="#{msgs.lbl_proyeccion_ventas}:" />
									<p:selectBooleanCheckbox value="#{planProduccionBean.mostrarProyeccionVentas}">
										<p:ajax process="@this" global="false" update="form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
										<f:validateBean />
									</p:selectBooleanCheckbox>
									<p:outputLabel value="#{msgs.lbl_planificacion_batch}:" />
									<p:selectBooleanCheckbox value="#{planProduccionBean.mostrarPlanificacion}">
										<p:ajax process="@this" global="false" update="form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
										<f:validateBean />
									</p:selectBooleanCheckbox>
									<p:outputLabel value="#{msgs.lbl_saldo}s:" />
									<p:selectBooleanCheckbox value="#{planProduccionBean.mostrarSaldos}">
										<p:ajax process="@this" global="false" update="form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
										<f:validateBean />
									</p:selectBooleanCheckbox>
									<p:outputLabel value="#{msgs.lbl_extras}:" />
									<p:selectBooleanCheckbox value="#{planProduccionBean.mostrarExtras}">
										<p:ajax process="@this" global="false" update="form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
										<f:validateBean />
									</p:selectBooleanCheckbox>
								</h:panelGrid>
							</p:outputPanel>
						</p:dialog>
						<!-- FIN CONFIGURAR COLUMNAS VISIBLES -->
						<!-- CONFIGURAR FACTOR CAMBIO -->
						<p:dialog header="#{msgs.lbl_factor_cambio}" widgetVar="dglModalFactorCambio" modal="true" height="40" width="230" showEffect="slide"
							hideEffect="slide">
							<p:outputPanel id="panelAsignarFactorCambio">
								<h:panelGrid columns="2" columnClasses="columnaEtiqueta, columnaValor" cellspacing="0" cellpadding="0">
									<p:outputLabel for="txtFactorCambio" value="#{msgs.lbl_factor_cambio}:" />
									<p:inputText value="#{planProduccionBean.factorCambio}" id="txtFactorCambio" required="true">
										<p:ajax process="@this" global="false" />
										<f:validateBean />
									</p:inputText>
								</h:panelGrid>
							</p:outputPanel>
							<f:facet name="footer">
								<center>
									<p:commandButton value="#{msgs.btn_aceptar}" action="#{planProduccionBean.asignarFactorCambio}" process="@this"
										oncomplete="validacionesModal(xhr, status, args, dglModalFactorCambio )" update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
								</center>
							</f:facet>
						</p:dialog>
						<!-- FIN CONFIGURAR FACTOR CAMBIO -->
						<p:fieldset toggleable="true" legend="#{msgs.lbl_titulo_plan__produccion}">
							<h:panelGrid id="panelCabecera" columns="#{planProduccionBean.numeroColumnasPanelNuevo}"
								columnClasses="columnaEtiqueta,columnaValor,columnaEtiqueta,columnaValor" cellspacing="0" cellpadding="0">
								<p:outputLabel for="cboDocumento" value="#{msgs.lbl_documento}:" />
								<p:selectOneMenu styleClass="input-text" value="#{planProduccionBean.planProduccion.documento}" id="cboDocumento" required="true">
									<f:selectItem itemValue="" itemLabel="#{msgs.lbl_seleccione}" />
									<f:selectItems value="#{planProduccionBean.listaDocumento}" var="_documento" itemLabel="#{_documento.nombre}" itemValue="#{_documento}" />
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:selectOneMenu>
								<p:outputLabel value="#{msgs.lbl_semana}:" />
								<h:outputText value="#{planProduccionBean.planProduccion.semanaAnio}" />
								<h:outputText value="#{msgs.lbl_bodega_trabajo}:" />
								<p:autoComplete queryDelay="#{sesionControler.retrasoFiltro}" id="auProducto" multiple="true" styleClass="input-text"
									value="#{planProduccionBean.listaBodegaSeleccionada}" completeMethod="#{planProduccionBean.autocompletarBodegasActivas}" minQueryLength="2"
									converter="bodegaConverterMultiple" var="_bodega" itemLabel="#{_bodega.nombre}" itemValue="#{_bodega}" forceSelection="true">
									<p:column>
										<h:outputText value="#{_bodega.nombre}" />
									</p:column>
									<p:ajax process="@this" global="false" event="change" listener="#{planProduccionBean.agregarBodegasTrabajo}" />
									<p:ajax process="@this" global="false" event="itemSelect" listener="#{planProduccionBean.agregarBodegasTrabajo}" />
									<p:ajax process="@this" global="false" event="itemUnselect" listener="#{planProduccionBean.agregarBodegasTrabajo}" />
									<f:validateBean />
								</p:autoComplete>
								<p:outputLabel for="calFechaInicio" value="#{msgs.lbl_fecha_desde}:" />
								<p:calendar pattern="#{planProduccionBean.formatoFecha}" showOn="button" navigator="true"
									value="#{planProduccionBean.planProduccion.fechaInicio}" id="calFechaInicio" required="true" styleClass="input-text" disabled="true">
									<p:ajax event="dateSelect" process="@this" global="false" update=":form:tvDetallePlanProduccion:cbPlanMaestro"></p:ajax>
									<p:ajax event="change" process="@this" global="false" update=":form:tvDetallePlanProduccion:cbPlanMaestro"></p:ajax>
									<f:validateBean />
								</p:calendar>
								<p:outputLabel for="txtDescripcion" value="#{msgs.lbl_descripcion}:" />
								<p:inputTextarea styleClass="input-text" value="#{planProduccionBean.planProduccion.descripcion}" id="txtDescripcion">
									<p:ajax process="@this" global="false" />
									<f:validateBean />
								</p:inputTextarea>
								<p:outputLabel for="calFechaFin" value="#{msgs.lbl_fecha_hasta}:" />
								<p:calendar pattern="#{planProduccionBean.formatoFecha}" showOn="button" navigator="true" disabled="true"
									value="#{planProduccionBean.planProduccion.fechaFin}" id="calFechaFin" required="true" styleClass="input-text">
									<p:ajax event="dateSelect" process="@this" global="false" update=":form:tvDetallePlanProduccion:cbPlanMaestro"></p:ajax>
									<p:ajax event="change" process="@this" global="false" update=":form:tvDetallePlanProduccion:cbPlanMaestro"></p:ajax>
									<f:validateBean />
								</p:calendar>
							</h:panelGrid>
						</p:fieldset>
						<p:spacer />
						<p:fieldset>
							<p:tabView cache="true" dynamic="true" id="tvDetallePlanProduccion">
								<p:tab title="#{msgs.lbl_detalle_plan_produccion}">
									<h:panelGrid columns="1" width="100%">
										<h:panelGroup>
											<h:panelGrid columns="4">
												<h:panelGroup>
													<p:commandButton title="#{msgs.lbl_configurar_columnas}" icon="ui-icon-gear" onclick="dglModalMostrarColumnas.show();" type="button" />
													<p:commandButton value="#{msgs.lbl_ejecutar_proyeccion}" icon="ui-icon-plus" actionListener="#{planProduccionBean.sugerir}"
														process="@this" update=":form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
													<p:commandButton value="#{msgs.btn_agregar_detalle}" id="btnAgregarDetalle" action="#{planProduccionBean.agregarDetalle}"
														update=":form:tvDetallePlanProduccion" process="@this,:form:tvDetallePlanProduccion:panelDetallePlanProduccion" icon="ui-icon-plus" />
													<p:commandButton value="#{msgs.lbl_listar_producto}" icon="ui-icon-plus" onclick="dglModalProducto.show();" type="button" />
												</h:panelGroup>
												<p:selectOneMenu style="width: 5px;" value="#{planProduccionBean.planProduccion.planMaestroProduccion}" id="cbPlanMaestro"
													required="false">
													<f:selectItem itemValue="" itemLabel="#{msgs.lbl_plan_maestro} #{msgs.lbl_seleccione}" />
													<f:selectItems value="#{planProduccionBean.listaPlanMaestroProduccion}" var="_planMaestro" itemLabel="#{_planMaestro.nombre}"
														itemValue="#{_planMaestro}" />
													<f:validateBean />
													<p:ajax process="@this" global="false" listener="#{planProduccionBean.asignarPlanMaestro}"
														update=":form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
												</p:selectOneMenu>
											</h:panelGrid>
										</h:panelGroup>
										<p:outputPanel id="panelDetallePlanProduccion">
											<p:remoteCommand name="refreshFooter"
												update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente:totalLunes :form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente:totalMartes 
												:form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente:totalMiercoles :form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente:totalJueves 
												:form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente:totalViernes :form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente:totalSabado 
												:form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente:totalDomingo" />
											<h:panelGrid style="text-align:left;">
												<p:commandButton value="#{msgs.btn_imprimir}" id="btnImprimir" process="@this" oncomplete="confirmacionImprimir.show()" icon="print">
												</p:commandButton>
											</h:panelGrid>
											<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" value="#{planProduccionBean.listaDetallePlanProduccion}"
												id="tablaDetalleDespachoCLiente" rowIndexVar="secuencial" binding="#{planProduccionBean.dtDetallePlanProduccion}"
												emptyMessage="#{msgs.msg_no_hay_datos}" var="_detallePlanProduccion" paginator="true" paginatorPosition="bottom" style="width:100%"
												rowKey="#{_detallePlanProduccion.id}" rows="#{planProduccionBean.numeroFilas}"
												rowsPerPageTemplate="#{planProduccionBean.numeroFilasPorPagina}" editable="true" editMode="cell"
												filteredValue="#{planProduccionBean.listaDetallePlanProduccionFiltrados}">
												<p:ajax event="filter" listener="#{planProduccionBean.totalizar}" oncomplete="refreshFooter();" />
												<p:columnGroup type="header">
													<p:row>
														<p:column colspan="1" rowspan="2" headerText="Nº" />
														<p:column colspan="2" headerText="#{msgs.lbl_producto}" />
														<p:column colspan="2" headerText="#{msgs.lbl_filtros}" rendered="#{planProduccionBean.mostrarFiltros}" />
														<p:column colspan="2" headerText="#{msgs.lbl_configuracion}" rendered="#{planProduccionBean.mostrarConfiguracion}" />
														<p:column colspan="8" headerText="#{msgs.lbl_ventas_semana_anterior}" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column colspan="8" headerText="#{msgs.lbl_proyeccion_ventas}" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column colspan="7" headerText="#{msgs.lbl_planificacion_batch}" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column colspan="8" headerText="#{msgs.lbl_saldo}s" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column colspan="4" headerText="#{msgs.lbl_extras}" rendered="#{planProduccionBean.mostrarExtras}" />
														<p:column colspan="2" rowspan="2" headerText="#{msgs.lbl_acciones}" />
													</p:row>
													<p:row>
														<p:column headerText="#{msgs.lbl_codigo}" filterBy="#{_detallePlanProduccion.producto.codigo}" filterMatchMode="contains" />
														<p:column headerText="#{msgs.lbl_nombre}" filterBy="#{_detallePlanProduccion.producto.nombre}" filterMatchMode="contains" />
														<p:column headerText="#{msgs.lbl_producto_categoria_producto}" rendered="#{planProduccionBean.mostrarFiltros}"
															filterBy="#{_detallePlanProduccion.producto.subcategoriaProducto.categoriaProducto.nombre}" filterMatchMode="contains" />
														<p:column headerText="#{msgs.lbl_producto_subcategoria_producto}" rendered="#{planProduccionBean.mostrarFiltros}"
															filterBy="#{_detallePlanProduccion.producto.subcategoriaProducto.nombre}" filterMatchMode="contains" />
														<p:column headerText="#{msgs.lbl_unidad_stock}" rendered="#{planProduccionBean.mostrarConfiguracion}" />
														<p:column headerText="#{msgs.lbl_ruta_fabricacion}" rendered="#{planProduccionBean.mostrarConfiguracion}" />
														<p:column headerText="L" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column headerText="M" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column headerText="X" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column headerText="J" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column headerText="V" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column headerText="S" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column headerText="D" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column headerText="#{msgs.lbl_factor_crecimiento}" rendered="#{planProduccionBean.mostrarVentasPrevias}" />
														<p:column rendered="#{planProduccionBean.mostrarProyeccionVentas}">
															<f:facet name="header">
																<p:commandLink value="#{msgs.lbl_factor_cambio}" onclick="dglModalFactorCambio.show();"></p:commandLink>
															</f:facet>
														</p:column>
														<p:column headerText="L" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column headerText="M" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column headerText="X" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column headerText="J" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column headerText="V" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column headerText="S" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column headerText="D" rendered="#{planProduccionBean.mostrarProyeccionVentas}" />
														<p:column headerText="L" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column headerText="M" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column headerText="X" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column headerText="J" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column headerText="V" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column headerText="S" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column headerText="D" rendered="#{planProduccionBean.mostrarPlanificacion}" />
														<p:column headerText="#{msgs.lbl_saldo_inicial}" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="L" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="M" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="X" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="J" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="V" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="S" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="D" rendered="#{planProduccionBean.mostrarSaldos}" />
														<p:column headerText="#{msgs.lbl_cantidad_produccion}" rendered="#{planProduccionBean.mostrarExtras}" />
														<p:column headerText="#{msgs.lbl_stock_minimo}" rendered="#{planProduccionBean.mostrarExtras}" />
														<p:column headerText="#{msgs.lbl_produccion_requerida_semana}" rendered="#{planProduccionBean.mostrarExtras}" />
														<p:column headerText="#{msgs.lbl_produccion_semana}" rendered="#{planProduccionBean.mostrarExtras}" />
													</p:row>
												</p:columnGroup>
												<p:column styleClass="columnaDTAccion tableCell">
													<h:outputText value="#{secuencial+1}" />
												</p:column>
												<p:column styleClass="columnaDTCodigoProducto tableCell">
													<p:inputText value="#{_detallePlanProduccion.producto.codigo}" id="txtCodigoProducto"
														rendered="#{_detallePlanProduccion.producto.id == 0}">
														<p:ajax listener="#{planProduccionBean.actualizarProducto}" process="txtCodigoProducto" event="change" global="false"
															update=":form:tvDetallePlanProduccion:panelDetallePlanProduccion" />
														<f:validateBean />
													</p:inputText>
													<h:outputText value="#{_detallePlanProduccion.producto.codigo}" rendered="#{_detallePlanProduccion.producto.id != 0}" />
												</p:column>
												<p:column styleClass="tableCell">
													<h:outputText value="#{_detallePlanProduccion.producto.nombre}" id="txtNombreProducto" />
												</p:column>
												<p:column styleClass="tableCell" rendered="#{planProduccionBean.mostrarFiltros}">
													<h:outputText value="#{_detallePlanProduccion.producto.subcategoriaProducto.categoriaProducto.nombre}" />
												</p:column>
												<p:column styleClass="tableCell" rendered="#{planProduccionBean.mostrarFiltros}">
													<h:outputText value="#{_detallePlanProduccion.producto.subcategoriaProducto.nombre}" />
												</p:column>
												<p:column styleClass="columnaDTUnidad tableCell" rendered="#{planProduccionBean.mostrarConfiguracion}">
													<p:selectOneMenu styleClass="input-text-col" value="#{_detallePlanProduccion.unidadStock}" id="cbUnidadProducto" required="true">
														<f:selectItem itemValue="" itemLabel="#{msgs.lbl_seleccione}" />
														<f:selectItems value="#{planProduccionBean.listaUnidad}" var="_unidad" itemLabel="#{_unidad.nombre}" itemValue="#{_unidad}" />
														<f:validateBean />
														<p:ajax process="@this" global="false" />
													</p:selectOneMenu>
												</p:column>
												<p:column styleClass="tableCell" rendered="#{planProduccionBean.mostrarConfiguracion}">
													<p:autoComplete queryDelay="#{sesionControler.retrasoFiltro}" styleClass="input-text" required="true"
														value="#{_detallePlanProduccion.rutaFabricacion}" completeMethod="#{planProduccionBean.autocompletarRutaFabricacion}"
														var="_rutaFabricacion" itemLabel="#{_rutaFabricacion.nombre}" itemValue="#{_rutaFabricacion}" forceSelection="true" dropdown="true"
														minQueryLength="2" id="autoRutaFabricacion">
														<p:column headerText="#{msgs.lbl_codigo}">#{_rutaFabricacion.codigo}</p:column>
														<p:column headerText="#{msgs.lbl_nombre}">#{_rutaFabricacion.nombre}</p:column>
														<p:ajax process="@this" global="false" />
														<f:validateBean />
													</p:autoComplete>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.ventaLunesAnterior}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.ventaMartesAnterior}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.ventaMiercolesAnterior}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.ventaJuevesAnterior}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.ventaViernesAnterior}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.ventaSabadoAnterior}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.ventaDomingoAnterior}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarVentasPrevias}">
													<h:outputText value="#{_detallePlanProduccion.factorCrecimiento}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<p:inputText size="10" value="#{_detallePlanProduccion.factorCambio}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
														<f:validateBean />
														<p:ajax process="@this" event="change" listener="#{planProduccionBean.proyectarVentas}" global="flase"
															update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
													</p:inputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<h:outputText value="#{_detallePlanProduccion.ventaLunes}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<h:outputText value="#{_detallePlanProduccion.ventaMartes}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<h:outputText value="#{_detallePlanProduccion.ventaMiercoles}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<h:outputText value="#{_detallePlanProduccion.ventaJueves}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<h:outputText value="#{_detallePlanProduccion.ventaViernes}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<h:outputText value="#{_detallePlanProduccion.ventaSabado}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarProyeccionVentas}">
													<h:outputText value="#{_detallePlanProduccion.ventaDomingo}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(1, _detallePlanProduccion, true)}"
													rendered="#{planProduccionBean.mostrarPlanificacion}" id="colBatch1">
													<p:cellEditor id="edit1">
														<f:facet name="output">
															<h:outputText value="#{_detallePlanProduccion.batchLunes}" />
														</f:facet>
														<f:facet name="input">
															<p:inputText size="5" value="#{_detallePlanProduccion.batchLunes}" disabled="#{!planProduccionBean.isEditable(0)}">
																<p:ajax process="@this" listener="#{planProduccionBean.calcularSaldos}" global="false" partialSubmit="true"
																	update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
																<f:validateBean />
															</p:inputText>
														</f:facet>
													</p:cellEditor>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(2, _detallePlanProduccion, true)}"
													rendered="#{planProduccionBean.mostrarPlanificacion}">
													<p:cellEditor id="edit2">
														<f:facet name="output">
															<h:outputText value="#{_detallePlanProduccion.batchMartes}" />
														</f:facet>
														<f:facet name="input">
															<p:inputText size="5" value="#{_detallePlanProduccion.batchMartes}" disabled="#{!planProduccionBean.isEditable(1)}">
																<p:ajax process="@this" listener="#{planProduccionBean.calcularSaldos}" global="false" partialSubmit="true"
																	update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
																<f:validateBean />
															</p:inputText>
														</f:facet>
													</p:cellEditor>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(3, _detallePlanProduccion, true)}"
													rendered="#{planProduccionBean.mostrarPlanificacion}">
													<p:cellEditor id="edit3">
														<f:facet name="output">
															<h:outputText value="#{_detallePlanProduccion.batchMiercoles}" />
														</f:facet>
														<f:facet name="input">
															<p:inputText size="5" value="#{_detallePlanProduccion.batchMiercoles}" disabled="#{!planProduccionBean.isEditable(2)}">
																<p:ajax process="@this" listener="#{planProduccionBean.calcularSaldos}" global="false" partialSubmit="true"
																	update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
																<f:validateBean />
															</p:inputText>
														</f:facet>
													</p:cellEditor>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(4, _detallePlanProduccion, true)}"
													rendered="#{planProduccionBean.mostrarPlanificacion}">
													<p:cellEditor id="edit4">
														<f:facet name="output">
															<h:outputText value="#{_detallePlanProduccion.batchJueves}" />
														</f:facet>
														<f:facet name="input">
															<p:inputText size="5" value="#{_detallePlanProduccion.batchJueves}" disabled="#{!planProduccionBean.isEditable(3)}">
																<p:ajax process="@this" listener="#{planProduccionBean.calcularSaldos}" global="false" partialSubmit="true"
																	update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
																<f:validateBean />
															</p:inputText>
														</f:facet>
													</p:cellEditor>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(5, _detallePlanProduccion, true)}"
													rendered="#{planProduccionBean.mostrarPlanificacion}">
													<p:cellEditor id="edit5">
														<f:facet name="output">
															<h:outputText value="#{_detallePlanProduccion.batchViernes}" />
														</f:facet>
														<f:facet name="input">
															<p:inputText size="5" value="#{_detallePlanProduccion.batchViernes}" disabled="#{!planProduccionBean.isEditable(4)}">
																<p:ajax process="@this" listener="#{planProduccionBean.calcularSaldos}" global="false" partialSubmit="true"
																	update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
																<f:validateBean />
															</p:inputText>
														</f:facet>
													</p:cellEditor>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(6, _detallePlanProduccion, true)}"
													rendered="#{planProduccionBean.mostrarPlanificacion}">
													<p:cellEditor id="edit6">
														<f:facet name="output">
															<h:outputText value="#{_detallePlanProduccion.batchSabado}" />
														</f:facet>
														<f:facet name="input">
															<p:inputText size="5" value="#{_detallePlanProduccion.batchSabado}" disabled="#{!planProduccionBean.isEditable(5)}">
																<p:ajax process="@this" listener="#{planProduccionBean.calcularSaldos}" global="false" partialSubmit="true"
																	update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
																<f:validateBean />
															</p:inputText>
														</f:facet>
													</p:cellEditor>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(7, _detallePlanProduccion, true)}"
													rendered="#{planProduccionBean.mostrarPlanificacion}">
													<p:cellEditor id="edit7">
														<f:facet name="output">
															<h:outputText value="#{_detallePlanProduccion.batchDomingo}" />
														</f:facet>
														<f:facet name="input">
															<p:inputText size="5" value="#{_detallePlanProduccion.batchDomingo}" disabled="#{!planProduccionBean.isEditable(6)}">
																<p:ajax process="@this" listener="#{planProduccionBean.calcularSaldos}" global="false" partialSubmit="true"
																	update=":form:tvDetallePlanProduccion:tablaDetalleDespachoCLiente" />
																<f:validateBean />
															</p:inputText>
														</f:facet>
													</p:cellEditor>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText id="outSaldoInicial" value="#{_detallePlanProduccion.saldoInicial}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column id="outSaldoLunes"
													styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(1, _detallePlanProduccion, false)}"
													rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText value="#{_detallePlanProduccion.saldoLunes}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column id="outSaldoMartes"
													styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(2, _detallePlanProduccion, false)}"
													rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText value="#{_detallePlanProduccion.saldoMartes}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column id="outSaldoMiercoles"
													styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(3, _detallePlanProduccion, false)}"
													rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText value="#{_detallePlanProduccion.saldoMiercoles}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column id="outSaldoJueves"
													styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(4, _detallePlanProduccion, false)}"
													rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText value="#{_detallePlanProduccion.saldoJueves}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column id="outSaldoViernes"
													styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(5, _detallePlanProduccion, false)}"
													rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText value="#{_detallePlanProduccion.saldoViernes}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column id="outSaldoSabado"
													styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(6, _detallePlanProduccion, false)} "
													rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText value="#{_detallePlanProduccion.saldoSabado}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column id="outSaldoDomingo"
													styleClass="columnaDTValorCorto tableCell #{planProduccionBean.getColorCelda(7, _detallePlanProduccion, false)}"
													rendered="#{planProduccionBean.mostrarSaldos}">
													<h:outputText value="#{_detallePlanProduccion.saldoDomingo}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarExtras}">
													<h:outputText value="#{_detallePlanProduccion.producto.cantidadProduccion}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarExtras}">
													<h:outputText id="outStockMinimo" value="#{_detallePlanProduccion.stockMinimo}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero2Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarExtras}">
													<h:outputText id="outProduccionRequeridaSemana" value="#{_detallePlanProduccion.cantidadRequeridaProduccionSemana}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero0Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTValorCorto tableCell" rendered="#{planProduccionBean.mostrarExtras}">
													<h:outputText id="outProduccionSemana" value="#{_detallePlanProduccion.totalProduccionSemana}">
														<f:convertNumber pattern="#{planProduccionBean.formatoNumero0Decimales}" />
													</h:outputText>
												</p:column>
												<p:column styleClass="columnaDTAccion tableCell" exportable="false">
													<p:commandLink actionListener="#{planProduccionBean.crearArbol(_detallePlanProduccion)}" process="@this"
														update=":form:panelArbolComponentes" title="#{msgs.btn_mostrar}" oncomplete="dglModalArbolComponentes.show();">
														<h:graphicImage library="images" name="preview.png" style="height : 16px; width : 16px;" />
													</p:commandLink>
												</p:column>
												<p:column styleClass="columnaDTAccion tableCell" exportable="false">
													<p:commandButton id="btnEliminarDetalle" action="#{planProduccionBean.eliminarDetalle}" icon="ui-icon-trash" title="#{msgs.lbl_eliminar}"
														update=":form:tvDetallePlanProduccion:panelDetallePlanProduccion" process="@this" />
												</p:column>
												<p:columnGroup type="footer" id="panelTotal">
													<p:row>
														<p:column colspan="#{planProduccionBean.columnaInicioBatch}" footerText="#{msgs.lbl_total}:	" style="text-align:right">
														</p:column>
														<p:column>
															<f:facet name="footer">
																<p:outputPanel id="totalLunes" autoUpdate="true">
																	<h:outputText value="#{planProduccionBean.totalBatchLunes}" style="text-align:right" />
																</p:outputPanel>
															</f:facet>
														</p:column>
														<p:column>
															<f:facet name="footer">
																<p:outputPanel id="totalMartes" autoUpdate="true">
																	<h:outputText value="#{planProduccionBean.totalBatchMartes}" style="text-align:right" />
																</p:outputPanel>
															</f:facet>
														</p:column>
														<p:column>
															<f:facet name="footer">
																<p:outputPanel id="totalMiercoles" autoUpdate="true">
																	<h:outputText value="#{planProduccionBean.totalBatchMiercoles}" style="text-align:right" />
																</p:outputPanel>
															</f:facet>
														</p:column>
														<p:column>
															<f:facet name="footer">
																<p:outputPanel id="totalJueves" autoUpdate="true">
																	<h:outputText value="#{planProduccionBean.totalBatchJueves}" style="text-align:right" />
																</p:outputPanel>
															</f:facet>
														</p:column>
														<p:column>
															<f:facet name="footer">
																<p:outputPanel id="totalViernes" autoUpdate="true">
																	<h:outputText value="#{planProduccionBean.totalBatchViernes}" style="text-align:right" />
																</p:outputPanel>
															</f:facet>
														</p:column>
														<p:column>
															<f:facet name="footer">
																<p:outputPanel id="totalSabado" autoUpdate="true">
																	<h:outputText value="#{planProduccionBean.totalBatchSabado}" style="text-align:right" />
																</p:outputPanel>
															</f:facet>
														</p:column>
														<p:column>
															<f:facet name="footer">
																<p:outputPanel id="totalDomingo" autoUpdate="true">
																	<h:outputText value="#{planProduccionBean.totalBatchDomingo}" style="text-align:right" />
																</p:outputPanel>
															</f:facet>
														</p:column>
														<p:column colspan="#{planProduccionBean.columnasPosterioresBatch}">
														</p:column>
													</p:row>
												</p:columnGroup>
											</p:dataTable>
										</p:outputPanel>
									</h:panelGrid>
								</p:tab>
							</p:tabView>
						</p:fieldset>
					</p:panel>
				</p:outputPanel>
				<p:outputPanel id="panelListado">
					<p:panel rendered="#{!planProduccionBean.editado}" header="#{msgs.lbl_panel_listado} (#{msgs.lbl_titulo_plan__produccion})">
						<p:dataTable filterDelay="#{sesionControler.retrasoFiltro}" id="tablaPlanProduccion" rowIndexVar="secuencial"
							emptyMessage="#{msgs.msg_no_hay_datos}" value="#{planProduccionBean.listaPlanProduccion}" var="_planProduccion" paginator="true"
							paginatorPosition="bottom" style="width:100%" binding="#{planProduccionBean.dtPlanProduccion}" rows="#{planProduccionBean.numeroFilas}"
							selection="#{planProduccionBean.planProduccion}" rowsPerPageTemplate="#{planProduccionBean.numeroFilasPorPagina}" selectionMode="single"
							rowKey="#{_planProduccion.id}" sortBy="#{_planProduccion.fechaInicio}" sortOrder="DESCENDING" lazy="true">
							<p:column styleClass="columnaDTAccion tableCell" headerText="Nº">
								<h:outputText value="#{secuencial+1}" />
							</p:column>
							<p:column styleClass="columnaDTNombre tableCell" sortBy="#{_planProduccion.documento.nombre}" filterBy="#{_planProduccion.documento.nombre}">
								<f:facet name="header">
									<h:outputText value="#{msgs.lbl_documento}" />
								</f:facet>
								<h:outputText value="#{_planProduccion.documento.nombre}" />
							</p:column>
							<!-- <p:column styleClass="columnaDTNombre tableCell" sortBy="#{_planProduccion.bodegaTrabajo.nombre}"
								filterBy="#{_planProduccion.bodegaTrabajo.nombre}">
								<f:facet name="header">
									<h:outputText value="#{msgs.lbl_bodega_trabajo}" />
								</f:facet>
								<h:outputText value="#{_planProduccion.bodegaTrabajo.nombre}" />
							</p:column> -->
						   <p:column styleClass="columnaDTNombre tableCell" >
								<f:facet name="header">
									<h:outputText value="#{msgs.lbl_bodega_trabajo}" />
								</f:facet>
								<h:outputText value="#{_planProduccion.bodegasTrabajo}" />
							</p:column> 
							<p:column styleClass="columnaDTValorCorto tableCell" headerText="#{msgs.lbl_semana}">
								<h:outputText value="#{_planProduccion.semanaAnio}" />
							</p:column>
							<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha_elaboracion}" sortBy="#{_planProduccion.fechaElaboracion}">
								<h:outputText value="#{_planProduccion.fechaElaboracion}">
									<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
								</h:outputText>
							</p:column>
							<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha_desde}" sortBy="#{_planProduccion.fechaInicio}">
								<h:outputText value="#{_planProduccion.fechaInicio}">
									<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
								</h:outputText>
							</p:column>
							<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha_hasta}" sortBy="#{_planProduccion.fechaFin}">
								<h:outputText value="#{_planProduccion.fechaFin}">
									<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
								</h:outputText>
							</p:column>
							<p:column styleClass="columnaDTFecha tableCell" headerText="#{msgs.lbl_fecha_ultima_orden_fabricacion}"
								sortBy="#{_planProduccion.ultimaFechaGeneradaOrden}">
								<h:outputText value="#{_planProduccion.ultimaFechaGeneradaOrden}">
									<f:convertDateTime pattern="#{planProduccionBean.formatoFecha}" />
								</h:outputText>
							</p:column>
							<p:column styleClass="tableCell" sortBy="#{_planProduccion.descripcion}" filterBy="#{_planProduccion.descripcion}">
								<f:facet name="header">
									<h:outputText value="#{msgs.lbl_descripcion}" />
								</f:facet>
								<h:outputText value="#{_planProduccion.descripcion}">
								</h:outputText>
							</p:column>
							<p:column styleClass="columnaDTAccion" exportable="false">
								<f:facet name="header">
									<h:outputText value="#{msgs.btn_generar_orden}" />
								</f:facet>
								<center>
									<p:commandLink actionListener="#{planProduccionBean.prepararOrdenProduccion(_planProduccion)}" process="@this"
										title="#{msgs.btn_generar_orden}">
										<h:graphicImage library="images" name="action_icon.png" style="height : 16px; width : 16px;" />
									</p:commandLink>
								</center>
							</p:column>
						</p:dataTable>
					</p:panel>
				</p:outputPanel>
				<p:separator />
				<ui:include src="/template/auditoriaRapida.xhtml">
					<ui:param name="fechaCreacion" value="#{planProduccionBean.planProduccion.fechaCreacion}" />
					<ui:param name="usuarioCreacion" value="#{planProduccionBean.planProduccion.usuarioCreacion}" />
					<ui:param name="fechaModificacion" value="#{planProduccionBean.planProduccion.fechaModificacion}" />
					<ui:param name="usuarioModificacion" value="#{planProduccionBean.planProduccion.usuarioModificacion}" />
				</ui:include>
			</p:outputPanel>
		</h:form>
	</ui:define>
</ui:composition>
</html>